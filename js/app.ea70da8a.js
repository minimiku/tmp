(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r={app:0},i=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-026864dc":"81412a8f","chunk-2d0cf13d":"e4fffb48","chunk-949ad078":"1966cdf7","chunk-f7840a7e":"3bb41a04","chunk-134ef324":"40e74e86","chunk-2d228c74":"9fc422d1","chunk-5a594e67":"c2b5e6dd","chunk-2a480ed0":"bb8b0cdb","chunk-148f7b9b":"45e3c392","chunk-15388063":"24e259c9","chunk-1c5c5806":"49235808","chunk-259205b6":"28323f9b","chunk-2987faf8":"bec70d03","chunk-2d0b383e":"f0238a8c","chunk-2d0b64bf":"97452d5f","chunk-2d0ba57a":"56429d3a","chunk-2d213307":"11d8160b","chunk-2d2165e6":"2347d240","chunk-2d221c57":"994bdb83","chunk-2d228d13":"cf33f586","chunk-52454c14":"771329c8","chunk-5274dfd7":"dcc90935","chunk-6390f65b":"e869d67b","chunk-8f832ed8":"8e675f77","chunk-c3df4a22":"ef6219c0","chunk-02db1438":"76df7168","chunk-b67049c6":"0937210c","chunk-cfe23950":"2faed680"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-026864dc":1,"chunk-f7840a7e":1,"chunk-2a480ed0":1,"chunk-259205b6":1,"chunk-52454c14":1,"chunk-8f832ed8":1,"chunk-c3df4a22":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-026864dc":"9edaf58c","chunk-2d0cf13d":"31d6cfe0","chunk-949ad078":"31d6cfe0","chunk-f7840a7e":"eeebf55f","chunk-134ef324":"31d6cfe0","chunk-2d228c74":"31d6cfe0","chunk-5a594e67":"31d6cfe0","chunk-2a480ed0":"026994ce","chunk-148f7b9b":"31d6cfe0","chunk-15388063":"31d6cfe0","chunk-1c5c5806":"31d6cfe0","chunk-259205b6":"a1b434de","chunk-2987faf8":"31d6cfe0","chunk-2d0b383e":"31d6cfe0","chunk-2d0b64bf":"31d6cfe0","chunk-2d0ba57a":"31d6cfe0","chunk-2d213307":"31d6cfe0","chunk-2d2165e6":"31d6cfe0","chunk-2d221c57":"31d6cfe0","chunk-2d228d13":"31d6cfe0","chunk-52454c14":"0e6e45a5","chunk-5274dfd7":"31d6cfe0","chunk-6390f65b":"31d6cfe0","chunk-8f832ed8":"84eb7d48","chunk-c3df4a22":"993e87b1","chunk-02db1438":"31d6cfe0","chunk-b67049c6":"31d6cfe0","chunk-cfe23950":"31d6cfe0"}[e]+".css",r=c.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===a||u===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete o[e],f.parentNode.removeChild(f),n(i)},f.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://cdn.jsdelivr.net/gh/minimiku/tmp@0.22/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"009f":function(e,t,n){},"05fe":function(e,t,n){"use strict";var a=n("de07"),o=n.n(a);o.a},"063c":function(e,t,n){"use strict";var a=n("9efd"),o="/api/admin",r={};function i(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments"),method:"post",data:t})}r.latestComment=function(e,t,n){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/latest"),params:{top:t,status:n},method:"get"})},r.queryComment=function(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments"),params:t,method:"get"})},r.commentTree=function(e,t,n){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/").concat(t,"/tree_view"),params:n,method:"get"})},r.updateStatus=function(e,t,n){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/").concat(t,"/status/").concat(n),method:"put"})},r.updateStatusInBatch=function(e,t,n){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/status/").concat(n),data:t,method:"put"})},r.delete=function(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/").concat(t),method:"delete"})},r.deleteInBatch=function(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments"),data:t,method:"delete"})},r.create=function(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments"),data:t,method:"post"})},r.update=function(e,t,n){return Object(a["a"])({url:"".concat(o,"/").concat(e,"/comments/").concat(t),data:n,method:"put"})},r.createPostComment=function(e){return i("posts",e)},r.createSheetComment=function(e){return i("sheets",e)},r.createJournalComment=function(e){return i("journals",e)},r.createComment=function(e,t){return"sheet"===t?r.createSheetComment(e):"journal"===t?r.createJournalComment(e):r.createPostComment(e)},r.commentStatus={PUBLISHED:{value:"PUBLISHED",color:"green",status:"success",text:"已发布"},AUDITING:{value:"AUDITING",color:"yellow",status:"warning",text:"待审核"},RECYCLE:{value:"RECYCLE",color:"red",status:"error",text:"回收站"}},t["a"]=r},1529:function(e,t,n){},"1a86":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n("8e6e"),n("ac6a"),n("456d");var a=n("ade3"),o=n("51e6"),r=n("2f62");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={computed:s({},Object(r["e"])({layoutMode:function(e){return e.app.layout},navTheme:function(e){return e.app.theme},primaryColor:function(e){return e.app.color},fixedHeader:function(e){return e.app.fixedHeader},fixSiderbar:function(e){return e.app.fixSiderbar},fixSidebar:function(e){return e.app.fixSiderbar},contentWidth:function(e){return e.app.contentWidth},autoHideHeader:function(e){return e.app.autoHideHeader},sidebarOpened:function(e){return e.app.sidebar}})),methods:{isTopMenu:function(){return"topmenu"===this.layoutMode},isSideMenu:function(){return!this.isTopMenu()}}},l={computed:s({},Object(r["e"])({device:function(e){return e.app.device}})),methods:{isMobile:function(){return this.device===o["a"].MOBILE},isDesktop:function(){return this.device===o["a"].DESKTOP},isTablet:function(){return this.device===o["a"].TABLET}}}},2065:function(e,t,n){"use strict";var a=n("31de"),o=n.n(a);o.a},2432:function(e,t,n){},"31de":function(e,t,n){},3847:function(e,t,n){},3969:function(e,t,n){},"3fc9":function(e,t,n){"use strict";var a=n("862d"),o=n.n(a);o.a},4360:function(e,t,n){"use strict";var a=n("a026"),o=n("2f62"),r=n("9fb0"),i={state:{sidebar:!0,device:"desktop",theme:"",layout:"",contentWidth:"",fixedHeader:!1,fixSiderbar:!1,autoHideHeader:!1,color:null,apiUrl:null,layoutSetting:!1,loginModal:!1},mutations:{SET_API_URL:function(e,t){e.apiUrl=t,a["default"].ls.set(r["b"],t)},RESTORE_API_URL:function(e){e.apiUrl=null,a["default"].ls.set(r["b"],null)},SET_SIDEBAR_TYPE:function(e,t){e.sidebar=t,a["default"].ls.set(r["l"],t)},CLOSE_SIDEBAR:function(e){a["default"].ls.set(r["l"],!0),e.sidebar=!1},TOGGLE_DEVICE:function(e,t){e.device=t},TOGGLE_THEME:function(e,t){a["default"].ls.set(r["i"],t),e.theme=t},TOGGLE_LAYOUT_MODE:function(e,t){a["default"].ls.set(r["h"],t),e.layout=t},TOGGLE_FIXED_HEADER:function(e,t){a["default"].ls.set(r["e"],t),e.fixedHeader=t},TOGGLE_FIXED_SIDERBAR:function(e,t){a["default"].ls.set(r["g"],t),e.fixSiderbar=t},TOGGLE_FIXED_HEADER_HIDDEN:function(e,t){a["default"].ls.set(r["f"],t),e.autoHideHeader=t},TOGGLE_CONTENT_WIDTH:function(e,t){a["default"].ls.set(r["d"],t),e.contentWidth=t},TOGGLE_COLOR:function(e,t){a["default"].ls.set(r["c"],t),e.color=t},TOGGLE_LAYOUT_SETTING:function(e,t){a["default"].ls.set(r["j"],t),e.layoutSetting=t},TOGGLE_LOGIN_MODAL:function(e,t){e.loginModal=t}},actions:{setSidebar:function(e,t){var n=e.commit;n("SET_SIDEBAR_TYPE",t)},CloseSidebar:function(e){var t=e.commit;t("CLOSE_SIDEBAR")},ToggleDevice:function(e,t){var n=e.commit;n("TOGGLE_DEVICE",t)},ToggleTheme:function(e,t){var n=e.commit;n("TOGGLE_THEME",t)},ToggleLayoutMode:function(e,t){var n=e.commit;n("TOGGLE_LAYOUT_MODE",t)},ToggleFixedHeader:function(e,t){var n=e.commit;t||n("TOGGLE_FIXED_HEADER_HIDDEN",!1),n("TOGGLE_FIXED_HEADER",t)},ToggleFixSiderbar:function(e,t){var n=e.commit;n("TOGGLE_FIXED_SIDERBAR",t)},ToggleFixedHeaderHidden:function(e,t){var n=e.commit;n("TOGGLE_FIXED_HEADER_HIDDEN",t)},ToggleContentWidth:function(e,t){var n=e.commit;n("TOGGLE_CONTENT_WIDTH",t)},ToggleColor:function(e,t){var n=e.commit;n("TOGGLE_COLOR",t)},ToggleLayoutSetting:function(e,t){var n=e.commit;n("TOGGLE_LAYOUT_SETTING",t)},ToggleLoginModal:function(e,t){var n=e.commit;n("TOGGLE_LOGIN_MODAL",t)}}},s=i,c=n("50fc"),l=n("c24f"),u={state:{token:null,user:{}},mutations:{SET_TOKEN:function(e,t){a["default"].ls.set(r["a"],t,t?1e3*t.expired_in:null),e.token=t},CLEAR_TOKEN:function(e){a["default"].ls.remove(r["a"]),e.token=null},SET_USER:function(e,t){a["default"].ls.set(r["m"],t),e.user=t}},actions:{installCleanToken:function(e,t){var n=e.commit;return new Promise((function(e,a){c["a"].install(t).then((function(t){n("CLEAR_TOKEN"),e(t)})).catch((function(e){a(e)}))}))},refreshUserCache:function(e){var t=e.commit;return new Promise((function(e,n){l["a"].getProfile().then((function(n){t("SET_USER",n.data.data),e(n)})).catch((function(e){n(e)}))}))},login:function(e,t){var n=e.commit,o=t.username,r=t.password,i=t.authcode;return new Promise((function(e,t){c["a"].login(o,r,i).then((function(t){var o=t.data.data;a["default"].$log.debug("Got token",o),n("SET_TOKEN",o),e(t)})).catch((function(e){t(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e){c["a"].logout().then((function(){t("CLEAR_TOKEN"),e()})).catch((function(){e()}))}))},refreshToken:function(e,t){var n=e.commit;return new Promise((function(e,o){c["a"].refreshToken(t).then((function(t){var o=t.data.data;a["default"].$log.debug("Got token",o),n("SET_TOKEN",o),e(t)})).catch((function(e){var r=e.response.data;a["default"].$log.debug("Refresh error data",r),r&&400===r.status&&r.data===t&&n("CLEAR_TOKEN"),o(e)}))}))}}},d=u,f=(n("6762"),n("2fdb"),n("d73b"));function m(e,t){if(t.meta&&t.meta.permission){for(var n=!1,a=0,o=e.length;a<o;a++)if(n=t.meta.permission.includes(e[a]),n)return!0;return!1}return!0}function h(e,t){var n=e.filter((function(e){return!!m(t.permissionList,e)&&(e.children&&e.children.length&&(e.children=h(e.children,t)),!0)}));return n}var p={state:{routers:f["b"],addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=f["b"].concat(t)}},actions:{GenerateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var a=t.roles,o=h(f["a"],a);n("SET_ROUTERS",o),e()}))}}},g=p,b=n("482b"),v=["blog_url","developer_mode","attachment_upload_image_preview_enable","attachment_upload_max_parallel_uploads","attachment_upload_max_files","sheet_prefix","post_permalink_type","sheet_permalink_type","archives_prefix","path_suffix","default_editor","default_menu_team"],y={state:{options:[]},mutations:{SET_OPTIONS:function(e,t){a["default"].ls.set(r["k"],t),e.options=t}},actions:{refreshOptionsCache:function(e){var t=e.commit;return new Promise((function(e,n){b["a"].listAllByKeys(v).then((function(n){t("SET_OPTIONS",n.data.data),e(n)})).catch((function(e){n(e)}))}))}}},k=y,O={device:function(e){return e.app.device},theme:function(e){return e.app.theme},color:function(e){return e.app.color},layoutSetting:function(e){return e.app.layoutSetting},loginModal:function(e){return e.app.loginModal},token:function(e){return e.user.token},user:function(e){return e.user.user},addRouters:function(e){return e.permission.addRouters},apiUrl:function(e){return e.app.apiUrl?e.app.apiUrl:"".concat(window.location.protocol,"//").concat(window.location.host)},options:function(e){return e.option.options}},j=O,w={state:{isShow:!1,lastMsgId:-1,hasNewMsg:!0},mutations:{SET_CHAT_SHOW:function(e){e.isShow=!e.isShow},SET_HAS_NEW_MESSAGE:function(e,t){e.hasNewMsg=t},SET_LAST_MSG_ID:function(e,t){e.lastMsgId=t}}},S=w;a["default"].use(o["a"]);t["a"]=new o["a"].Store({modules:{app:s,user:d,permission:g,option:k,chat:S},state:{},mutations:{},actions:{},getters:j})},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id="4678"},"482b":function(e,t,n){"use strict";var a=n("9efd"),o="/api/admin/options",r={listAll:function(){return Object(a["a"])({url:"".concat(o,"/map_view"),method:"get"})},listAllByKeys:function(e){return Object(a["a"])({url:"".concat(o,"/map_view/keys"),data:e,method:"post"})},query:function(e){return Object(a["a"])({url:"".concat(o,"/list_view"),params:e,method:"get"})},save:function(e){return Object(a["a"])({url:"".concat(o,"/map_view/saving"),method:"post",data:e})},create:function(e){return Object(a["a"])({url:o,data:e,method:"post"})},delete:function(e){return Object(a["a"])({url:"".concat(o,"/").concat(e),method:"delete"})},get:function(e){return Object(a["a"])({url:"".concat(o,"/").concat(e),method:"get"})},update:function(e,t){return Object(a["a"])({url:"".concat(o,"/").concat(e),data:t,method:"put"})},type:{INTERNAL:{value:"INTERNAL",text:"系统"},CUSTOM:{value:"CUSTOM",text:"自定义"}}};t["a"]=r},"50fc":function(e,t,n){"use strict";var a=n("9efd"),o="/api/admin",r={counts:function(){return Object(a["a"])({url:"".concat(o,"/counts"),method:"get"})},isInstalled:function(){return Object(a["a"])({url:"".concat(o,"/is_installed"),method:"get"})},environments:function(){return Object(a["a"])({url:"".concat(o,"/environments"),method:"get"})},install:function(e){return Object(a["a"])({url:"".concat(o,"/installations"),data:e,method:"post"})},loginPreCheck:function(e,t){return Object(a["a"])({url:"".concat(o,"/login/precheck"),data:{username:e,password:t},method:"post"})},login:function(e,t,n){return Object(a["a"])({url:"".concat(o,"/login"),data:{username:e,password:t,authcode:n},method:"post"})},logout:function(){return Object(a["a"])({url:"".concat(o,"/logout"),method:"post"})},refreshToken:function(e){return Object(a["a"])({url:"".concat(o,"/refresh/").concat(e),method:"post"})},sendResetCode:function(e){return Object(a["a"])({url:"".concat(o,"/password/code"),data:e,method:"post"})},resetPassword:function(e){return Object(a["a"])({url:"".concat(o,"/password/reset"),data:e,method:"put"})},updateAdminAssets:function(){return Object(a["a"])({url:"".concat(o,"/halo-admin"),method:"put",timeout:6e5})},getLogFiles:function(e){return Object(a["a"])({url:"".concat(o,"/halo/logfile"),params:{lines:e},method:"get"})},downloadLogFiles:function(e){return Object(a["a"])({url:"".concat(o,"/halo/logfile/download"),params:{lines:e},method:"get"})}};t["a"]=r},"51e6":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n("8e95"),o=n.n(a),r={DESKTOP:"desktop",TABLET:"tablet",MOBILE:"mobile"},i=function(e){var t={match:function(){e&&e(r.DESKTOP)}},n={match:function(){e&&e(r.TABLET)}},a={match:function(){e&&e(r.MOBILE)}};o.a.register("screen and (max-width: 576px)",a).register("screen and (min-width: 576px) and (max-width: 1199px)",n).register("screen and (min-width: 1200px)",t)}},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("a026"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-config-provider",{attrs:{locale:e.locale}},[n("div",{staticClass:"h-full",attrs:{id:"app"}},[n("router-view")],1)])},r=[],i=n("677e"),s=n.n(i),c=n("51e6"),l={data:function(){return{locale:s.a}},mounted:function(){var e=this.$store;Object(c["b"])((function(t){switch(t){case c["a"].DESKTOP:e.commit("TOGGLE_DEVICE","desktop"),e.dispatch("setSidebar",!0);break;case c["a"].TABLET:e.commit("TOGGLE_DEVICE","tablet"),e.dispatch("setSidebar",!1);break;case c["a"].MOBILE:default:e.commit("TOGGLE_DEVICE","mobile"),e.dispatch("setSidebar",!0);break}}))}},u=l,d=n("2877"),f=Object(d["a"])(u,o,r,!1,null,null,null),m=f.exports,h=n("8c4f"),p=n("d73b");a["default"].use(h["a"]);var g=new h["a"]({mode:"hash",base:"https://cdn.jsdelivr.net/gh/minimiku/tmp@0.22/",scrollBehavior:function(){return{y:0}},routes:p["b"].concat(p["a"])}),b=n("e5d9"),v=n("4360"),y=n("85ff"),k=n.n(y),O=!0,j={isEnabled:!0,logLevel:O?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0};a["default"].use(k.a,j);n("3847");var w=n("c16e"),S=n.n(w),C=n("e819"),_=n("7071"),x=n("782e"),T=n("28da"),E=n("2c92"),L=n("27fd"),P=n("a071"),M=n("2fc4"),A=n("5efb"),D=n("cdeb"),I=n("dfae"),H=n("bb76"),$=n("e32c"),B=n("0bb7"),F=n("a79d"),q=n("9571"),N=n("a600"),G=n("3af3"),U=n("ff57"),z=n("0c63"),R=n("b558"),K=n("09d9"),W=n("98c5"),Y=n("fe2b"),V=n("d49c"),J=n("55f1"),Q=n("ed3b"),X=n("9fd0"),Z=n("de1b"),ee=n("768f"),te=n("681b"),ne=n("f2ca"),ae=n("59a5"),oe=n("9a63"),re=n("9839"),ie=n("8592"),se=n("160c"),ce=n("0020"),le=n("d865"),ue=n("7bec"),de=n("ccb9e"),fe=n("7571"),me=n("27ab"),he=n("f933"),pe=n("1fd5"),ge=n("40a7"),be=n("4df5"),ve=n("387a"),ye=n("bf7b"),ke=n("fc25"),Oe=n("3779"),je=n("1d87"),we=n("f64c"),Se=n("56cd");a["default"].use(_["a"]),a["default"].use(x["a"]),a["default"].use(T["a"]),a["default"].use(E["a"]),a["default"].use(L["a"]),a["default"].use(P["a"]),a["default"].use(M["a"]),a["default"].use(A["a"]),a["default"].use(D["a"]),a["default"].use(I["a"]),a["default"].use(H["a"]),a["default"].use($["a"]),a["default"].use(B["a"]),a["default"].use(F["a"]),a["default"].use(q["a"]),a["default"].use(N["a"]),a["default"].use(G["a"]),a["default"].use(U["a"]),a["default"].use(z["a"]),a["default"].use(R["a"]),a["default"].use(K["a"]),a["default"].use(W["a"]),a["default"].use(Y["b"]),a["default"].use(V["b"]),a["default"].use(J["a"]),a["default"].use(Q["a"]),a["default"].use(X["a"]),a["default"].use(Z["a"]),a["default"].use(ee["a"]),a["default"].use(te["a"]),a["default"].use(ne["a"]),a["default"].use(ae["a"]),a["default"].use(oe["a"]),a["default"].use(re["d"]),a["default"].use(ie["a"]),a["default"].use(se["a"]),a["default"].use(ce["a"]),a["default"].use(le["a"]),a["default"].use(ue["a"]),a["default"].use(de["a"]),a["default"].use(fe["a"]),a["default"].use(me["a"]),a["default"].use(he["a"]),a["default"].use(pe["a"]),a["default"].use(ge["a"]),a["default"].use(be["a"]),a["default"].use(ve["a"]),a["default"].use(ye["a"]),a["default"].use(ke["a"]),a["default"].use(Oe["a"]),a["default"].use(je["a"]),we["a"].config({maxCount:1}),a["default"].prototype.$message=we["a"],a["default"].prototype.$notification=Se["a"],a["default"].prototype.$info=Q["a"].info,a["default"].prototype.$success=Q["a"].success,a["default"].prototype.$error=Q["a"].error,a["default"].prototype.$warning=Q["a"].warning,a["default"].prototype.$confirm=Q["a"].confirm;n("3aed");var Ce=n("9fb0");function _e(){v["a"].commit("SET_SIDEBAR_TYPE",a["default"].ls.get(Ce["l"],!0)),v["a"].commit("TOGGLE_THEME",a["default"].ls.get(Ce["i"],C["a"].navTheme)),v["a"].commit("TOGGLE_LAYOUT_MODE",a["default"].ls.get(Ce["h"],C["a"].layout)),v["a"].commit("TOGGLE_FIXED_HEADER",a["default"].ls.get(Ce["e"],C["a"].fixedHeader)),v["a"].commit("TOGGLE_FIXED_SIDERBAR",a["default"].ls.get(Ce["g"],C["a"].fixSiderbar)),v["a"].commit("TOGGLE_CONTENT_WIDTH",a["default"].ls.get(Ce["d"],C["a"].contentWidth)),v["a"].commit("TOGGLE_FIXED_HEADER_HIDDEN",a["default"].ls.get(Ce["f"],C["a"].autoHideHeader)),v["a"].commit("TOGGLE_COLOR",a["default"].ls.get(Ce["c"],C["a"].primaryColor)),v["a"].commit("SET_TOKEN",a["default"].ls.get(Ce["a"])),v["a"].commit("SET_USER",a["default"].ls.get(Ce["m"])),v["a"].commit("SET_API_URL",a["default"].ls.get(Ce["b"])),v["a"].commit("SET_OPTIONS",a["default"].ls.get(Ce["k"]))}var xe=n("4eb5"),Te=n.n(xe);a["default"].use(S.a,C["a"].storageOptions),a["default"].use(Te.a),_e();n("6762"),n("7f7f"),n("96cf");var Ee=n("1da1"),Le=n("323e"),Pe=n.n(Le),Me=function(e){document.title=e;var t=navigator.userAgent,n=/\bMicroMessenger\/([\d\.]+)/;if(n.test(t)&&/ip(hone|od|ad)/i.test(t)){var a=document.createElement("iframe");a.src="/favicon.ico",a.style.display="none",a.onload=function(){setTimeout((function(){a.remove()}),9)},document.body.appendChild(a)}},Ae="Halo Dashboard",De=n("50fc");Pe.a.configure({showSpinner:!1,speed:500});var Ie=["Login","Install","NotFound","ResetPassword"],He=null;function $e(){He&&0!==He&&(clearTimeout(He),He=null,Pe.a.done())}g.beforeEach(function(){var e=Object(Ee["a"])(regeneratorRuntime.mark((function e(t,n,o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if($e(),He=setTimeout((function(){Pe.a.start()}),250),t.meta&&"undefined"!==typeof t.meta.title&&Me("".concat(t.meta.title," - ").concat(Ae)),a["default"].$log.debug("Token",v["a"].getters.token),!v["a"].getters.token){e.next=22;break}if("Install"!==t.name){e.next=8;break}return o(),e.abrupt("return");case 8:return e.next=10,De["a"].isInstalled();case 10:if(r=e.sent,r.data.data){e.next=15;break}return o({name:"Install"}),$e(),e.abrupt("return");case 15:if("Login"!==t.name){e.next=19;break}return o({name:"Dashboard"}),$e(),e.abrupt("return");case 19:return v["a"].getters.options||v["a"].dispatch("refreshOptionsCache").then(),o(),e.abrupt("return");case 22:if(!Ie.includes(t.name)){e.next=25;break}return o(),e.abrupt("return");case 25:o({name:"Login",query:{redirect:t.fullPath}}),$e();case 27:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),g.afterEach((function(){$e()}));n("3b2b"),n("6b54"),n("a481");var Be=n("5a0c"),Fe=n.n(Be),qe=(n("a471"),n("9158"));Fe.a.locale("zh-cn"),a["default"].filter("NumberFormat",(function(e){if(!e)return"0";var t=e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,");return t})),a["default"].filter("moment",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return Fe()(e).format(t)})),a["default"].filter("moment_post_date",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/YYYY/MM/";return Fe()(e).format(t)})),a["default"].filter("moment_post_year",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/YYYY/";return Fe()(e).format(t)})),a["default"].filter("moment_post_day",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/YYYY/MM/DD/";return Fe()(e).format(t)})),a["default"].filter("timeAgo",qe["b"]),a["default"].filter("fileSizeFormat",(function(e){if(!e)return"0 Bytes";var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0,a=parseFloat(e);n=Math.floor(Math.log(a)/Math.log(1024));var o=a/Math.pow(1024,n);return o=o.toFixed(2),o+" "+t[n]})),a["default"].filter("dayTime",(function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%86400%3600/60),o=Math.floor(e%86400%3600%60),r=t+"d "+n+"h "+a+"m "+o+"s";return r})),a["default"].filter("device",(function(e){return e?(/\(((?:(?!\))[\s\S])+)\)/.test(e),RegExp.$1):"user-agent empty"}));n("456d"),n("ac6a"),n("c5f6"),n("28a5");var Ne,Ge,Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("").reduce((function(e,t){var n=t.charCodeAt(0);return n>=0&&n<=128?e+1:e+2}),0)},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=0;return e.split("").reduce((function(e,a){var o=a.charCodeAt(0);return n+=o>=0&&o<=128?1:2,n<=t?e+a:e}),"")},Re={name:"Ellipsis",components:{Tooltip:he["a"]},props:{prefixCls:{type:String,default:"ant-pro-ellipsis"},tooltip:{type:Boolean},length:{type:Number,required:!0},lines:{type:Number,default:1},fullWidthRecognition:{type:Boolean,default:!1}},methods:{getStrDom:function(e,t){var n=this.$createElement;return n("span",[ze(e,this.length)+(t>this.length?"...":"")])},getTooltip:function(e,t){var n=this.$createElement;return n(he["a"],[n("template",{slot:"title"},[e]),this.getStrDom(e,t)])}},render:function(){var e=this.$props,t=e.tooltip,n=e.length,a=this.$slots.default.map((function(e){return e.text})).join(""),o=Ue(a),r=t&&o>n?this.getTooltip(a,o):this.getStrDom(a,o);return r}},Ke=Re,We=Object(d["a"])(Ke,Ne,Ge,!1,null,null,null),Ye=We.exports,Ve=Ye,Je=n("5a70"),Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("file-pond",{ref:"pond",attrs:{"label-idle":e.label,name:e.name,"allow-multiple":e.multiple,allowRevert:!1,"accepted-file-types":e.accepts,maxParallelUploads:e.maxParallelUploads,allowImagePreview:e.allowImagePreview,maxFiles:e.maxFiles,labelFileProcessing:"上传中",labelFileProcessingComplete:"上传完成",labelFileProcessingAborted:"取消上传",labelFileProcessingError:"上传错误",labelTapToCancel:"点击取消",labelTapToRetry:"点击重试",labelFileTypeNotAllowed:"不支持当前文件格式",fileValidateTypeLabelExpectedTypes:"请选择 {lastType} 格式的文件",files:e.fileList,server:e.server},on:{init:e.handleFilePondInit}})],1)},Xe=[],Ze=(n("8e6e"),n("ade3")),et=n("2f62"),tt=n("bc3a"),nt=n.n(tt),at=n("1501d"),ot=n.n(at),rt=(n("4ed3"),n("2cfc")),it=n.n(rt),st=(n("57c8"),n("1942")),ct=n.n(st);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){Object(Ze["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt=ot()(it.a,ct.a),ft={name:"FilePondUpload",components:{FilePond:dt},props:{name:{type:String,required:!1,default:"file"},filed:{type:String,required:!1,default:""},multiple:{type:Boolean,required:!1,default:!0},accepts:{type:Array,required:!1,default:function(){return null}},label:{type:String,required:!1,default:"点击选择文件或将文件拖拽到此处"},uploadHandler:{type:Function,required:!0}},computed:ut(ut({},Object(et["c"])(["options"])),{},{maxParallelUploads:function(){return this.options?this.options.attachment_upload_max_parallel_uploads:1},allowImagePreview:function(){return!!this.options&&this.options.attachment_upload_image_preview_enable},maxFiles:function(){return this.options?this.options.attachment_upload_max_files:1}}),data:function(){var e=this;return{server:{process:function(t,n,a,o,r,i,s){var c=new FormData;c.append(t,n,n.name);var l=nt.a.CancelToken,u=l.source();return e.uploadHandler(c,(function(e){e.total>0&&i(e.lengthComputable,e.loaded,e.total)}),u.token,e.filed,n).then((function(t){o(t),e.$log.debug("Uploaded successfully",t),e.$emit("success",t,n)})).catch((function(t){e.$log.debug("Failed to upload file",t),e.$emit("failure",t,n),r()})),{abort:function(){s(),e.$log.debug("Upload operation aborted by the user"),u.cancel("Upload operation canceled by the user.")}}}},fileList:[]}},methods:{handleFilePondInit:function(){this.$log.debug("FilePond has initialized")},handleClearFileList:function(){this.$refs.pond.removeFiles()}}},mt=ft,ht=Object(d["a"])(mt,Qe,Xe,!1,null,null,null),pt=ht.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-drawer",{attrs:{title:e.title,width:e.isMobile()?"100%":e.drawerWidth,closable:"",visible:e.visible,destroyOnClose:"",afterVisibleChange:e.handleAfterVisibleChanged},on:{close:e.onClose}},[n("a-row",{attrs:{type:"flex",align:"middle"}},[n("a-input-search",{attrs:{placeholder:"搜索",enterButton:""},on:{search:function(t){return e.handleQuery()}},model:{value:e.queryParam.keyword,callback:function(t){e.$set(e.queryParam,"keyword",t)},expression:"queryParam.keyword"}})],1),n("a-divider"),n("a-row",{attrs:{type:"flex",align:"middle"}},[n("a-col",{attrs:{span:24}},[n("a-spin",{attrs:{spinning:e.loading}},[0==e.attachments.length?n("a-empty"):e._l(e.attachments,(function(t,a){return n("div",{key:a,staticClass:"attach-item",on:{click:function(n){return e.handleSelectAttachment(t)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.handleJudgeMediaType(t),expression:"!handleJudgeMediaType(item)"}]},[e._v("当前格式不支持预览")]),n("img",{directives:[{name:"show",rawName:"v-show",value:e.handleJudgeMediaType(t),expression:"handleJudgeMediaType(item)"}],attrs:{src:t.thumbPath,loading:"lazy"}})])}))],2)],1)],1),n("a-divider"),n("div",{staticClass:"page-wrapper"},[n("a-pagination",{attrs:{current:e.pagination.page,total:e.pagination.total,defaultPageSize:e.pagination.size,showLessItems:""},on:{change:e.handlePaginationChange}})],1),n("a-divider",{staticClass:"divider-transparent"}),n("div",{staticClass:"bottom-control"},[n("a-space",[e.isChooseAvatar?n("a-button",{attrs:{type:"dashed"},on:{click:e.handleSelectGravatar}},[e._v("使用 Gravatar")]):e._e(),n("a-button",{attrs:{type:"primary"},on:{click:e.handleShowUploadModal}},[e._v("上传附件")])],1)],1)],1),n("a-modal",{attrs:{title:"上传附件",footer:null,afterClose:e.onUploadClose,destroyOnClose:""},model:{value:e.uploadVisible,callback:function(t){e.uploadVisible=t},expression:"uploadVisible"}},[n("FilePondUpload",{ref:"upload",attrs:{uploadHandler:e.uploadHandler}})],1)],1)},bt=[],vt=(n("55dd"),n("1a86")),yt=n("a796"),kt={name:"AttachmentSelectDrawer",mixins:[vt["a"],vt["b"]],model:{prop:"visible",event:"close"},props:{visible:{type:Boolean,required:!1,default:!1},drawerWidth:{type:Number,required:!1,default:480},title:{type:String,required:!1,default:"选择附件"},isChooseAvatar:{type:Boolean,required:!1,default:!1}},data:function(){return{uploadVisible:!1,loading:!0,pagination:{page:1,size:12,sort:null,total:1},queryParam:{page:0,size:12,sort:null,keyword:null},attachments:[],uploadHandler:yt["a"].upload}},methods:{handleShowUploadModal:function(){this.uploadVisible=!0},handleListAttachments:function(){var e=this;this.loading=!0,this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,yt["a"].query(this.queryParam).then((function(t){e.attachments=t.data.data.content,e.pagination.total=t.data.data.total})).finally((function(){setTimeout((function(){e.loading=!1}),200)}))},handleQuery:function(){this.handlePaginationChange(1,this.pagination.size)},handleSelectAttachment:function(e){this.$emit("listenToSelect",e)},handleSelectGravatar:function(){this.$emit("listenToSelectGravatar")},handlePaginationChange:function(e,t){this.pagination.page=e,this.pagination.size=t,this.handleListAttachments()},onUploadClose:function(){this.$refs.upload.handleClearFileList(),this.handlePaginationChange(1,this.pagination.size)},handleAfterVisibleChanged:function(e){e&&this.handleListAttachments()},handleJudgeMediaType:function(e){var t=e.mediaType;if(t){var n=t.split("/")[0];return"image"===n}return!1},onClose:function(){this.$emit("close",!1)}}},Ot=kt,jt=Object(d["a"])(Ot,gt,bt,!1,null,null,null),wt=jt.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-button",{attrs:{type:e.computedType,icon:e.computedIcon,loading:e.loading,size:e.size,block:e.block},on:{click:e.handleClick}},[e._v(e._s(e.computedText))])},Ct=[],_t={name:"ReactiveButton",props:{type:{type:String,default:"primary"},icon:{type:String,default:null},size:{type:String,default:"default"},block:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},errored:{type:Boolean,default:!1},text:{type:String,default:""},loadedText:{type:String,default:""},erroredText:{type:String,default:""}},data:function(){return{loaded:!1,hasError:!1}},watch:{loading:function(e){var t=this;e||(this.loaded=!0,this.errored&&(this.hasError=!0),setTimeout((function(){t.loaded=!1,t.hasError=!1,t.$emit("callback")}),400))}},computed:{computedType:function(){return this.loaded&&this.hasError?"danger":this.type},computedIcon:function(){return this.loaded?this.hasError?"close-circle":"check-circle":this.icon},computedText:function(){return this.loaded?this.hasError?this.erroredText:this.loadedText:this.text}},methods:{handleClick:function(){this.$emit("click")}}},xt=_t,Tt=Object(d["a"])(xt,St,Ct,!1,null,null,null),Et=Tt.exports,Lt={Ellipsis:Ve,FooterToolbar:Je["a"],FilePondUpload:pt,AttachmentSelectDrawer:wt,ReactiveButton:Et},Pt={};Object.keys(Lt).forEach((function(e){Pt[e]=a["default"].component(e,Lt[e])}));var Mt=n("9224"),At=(n("0ca9"),n("bf69")),Dt=(n("e54f"),n("b05d"));a["default"].use(Dt["a"],{config:{},plugins:{},lang:At["a"]});var It=n("d1d4"),Ht=n.n(It);n("394c");a["default"].config.productionTip=!1,a["default"].prototype.VERSION=Mt["a"],a["default"].use(g),a["default"].use(b["a"]),a["default"].use(Ht.a),a["default"].prototype.$EventBus=new a["default"],new a["default"]({router:g,store:v["a"],render:function(e){return e(m)}}).$mount("#app")},"5a70":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.prefixCls},[n("div",{staticClass:"float-left"},[e._t("extra",[e._v(e._s(e.extra))])],2),n("div",{staticClass:"float-right"},[e._t("default")],2)])},o=[],r={name:"FooterToolBar",props:{prefixCls:{type:String,default:"ant-pro-footer-toolbar"},extra:{type:[String,Object],default:""}}},i=r,s=n("2877"),c=Object(s["a"])(i,a,o,!1,null,null,null),l=c.exports;n("2432"),t["a"]=l},"5f69":function(e,t,n){"use strict";var a=n("3969"),o=n.n(a);o.a},6692:function(e,t,n){"use strict";var a=n("fb91"),o=n.n(a);o.a},"680a":function(e,t,n){"use strict";n.d(t,"a",(function(){return Lt})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return Ht}));var a,o,r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},i=[],s={name:"BlankLayout"},c=s,l=n("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null),d=u.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-layout",{class:["layout",e.device]},[e.isMobile()?n("a-drawer",{attrs:{placement:"left",wrapClassName:"drawer-sider "+e.navTheme,closable:!1,visible:e.collapsed},on:{close:e.drawerClose}},[n("side-menu",{attrs:{mode:"inline",menus:e.menus,theme:e.navTheme,collapsed:!1,collapsible:!0},on:{menuSelect:e.menuSelect}})],1):e.isSideMenu()?n("side-menu",{attrs:{mode:"inline",menus:e.menus,theme:e.navTheme,collapsed:e.collapsed,collapsible:!0}}):e._e(),n("a-layout",{class:[e.layoutMode,"content-width-"+e.contentWidth],style:{paddingLeft:e.contentPaddingLeft,minHeight:"100vh"}},[n("global-header",{attrs:{mode:e.layoutMode,menus:e.menus,theme:e.navTheme,collapsed:e.collapsed,device:e.device},on:{toggle:e.toggle}}),n("a-layout-content",{style:{height:"100%",margin:"24px 24px 0",paddingTop:e.fixedHeader?"64px":"0"}},[n("transition",{attrs:{name:"page-transition"}},[n("route-view")],1)],1),n("a-button",{staticStyle:{position:"fixed",left:"auto",top:"auto",bottom:"90px",right:"34px"},attrs:{type:"primary",size:"small",shape:"circle"},on:{click:e.refreshPage}},[n("a-icon",{attrs:{type:"sync"}})],1),n("halo-button"),n("a-layout-footer",[n("global-footer")],1)],1),n("chat-modal"),n("setting-drawer",{ref:"drawer"}),n("LoginModal",{on:{success:e.onLoginSucceed}})],1)},m=[],h=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("ade3")),p=n("ca00"),g=n("2f62"),b=n("1a86"),v=n("e819"),y=n("d73b"),k={name:"RouteView",props:{keepAlive:{type:Boolean,default:!0}},data:function(){return{}},render:function(){var e=arguments[0],t=this.$route.meta,n=e("keep-alive",[e("router-view")]),a=e("router-view");return!1===t.keepAlive?a:this.keepAlive||t.keepAlive?n:a}},O=k,j=Object(l["a"])(O,a,o,!1,null,null,null),w=j.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-layout-sider",{class:["sider",e.isDesktop()?null:"shadow",e.theme,e.fixSiderbar?"ant-fixed-sidemenu":null],attrs:{width:"256px",collapsible:e.collapsible,trigger:null},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[n("logo"),n("s-menu",{staticStyle:{padding:"16px 0px"},attrs:{collapsed:e.collapsed,menu:e.menus,theme:e.theme,mode:e.mode},on:{select:e.onSelect}})],1)},C=[],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.onLogoClick()}}},[n("h1",{staticClass:"logo-title",staticStyle:{"line-height":"64px"}},[e._v("Halo")]),n("h1",{staticClass:"logo-sub-title",staticStyle:{"padding-left":"10px","line-height":"64px"}},[e._v("Dashboard")])])])},x=[],T=n("482b");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={name:"Logo",data:function(){return{clickCount:0,optionsToCreate:{developer_mode:!0}}},computed:L({},Object(g["c"])(["options"])),methods:L(L({},Object(g["b"])(["refreshOptionsCache"])),{},{onLogoClick:function(){var e=this;this.clickCount++,10===this.clickCount?T["a"].save(this.optionsToCreate).then((function(){e.refreshOptionsCache(),e.$message.success("开发者选项已启用！"),e.clickCount=0,e.$router.push({name:"ToolList"})})):this.clickCount>=5&&(this.options.developer_mode?(this.$message.info("当前已启用开发者选项！"),this.clickCount=0):this.$message.info("再点击 ".concat(10-this.clickCount," 次即可启用开发者选项！")))}})},M=P,A=Object(l["a"])(M,_,x,!1,null,null,null),D=A.exports,I=n("2638"),H=n.n(I),$=n("53ca"),B=(n("7f7f"),n("6762"),n("2fdb"),n("55f1")),F=n("0c63");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={name:"SMenu",props:{menu:{type:Array,required:!0},theme:{type:String,required:!1,default:"dark"},mode:{type:String,required:!1,default:"inline"},collapsed:{type:Boolean,required:!1,default:!1}},data:function(){return{openKeys:[],selectedKeys:[],cachedOpenKeys:[]}},computed:{rootSubmenuKeys:function(e){var t=[];return e.menu.forEach((function(e){return t.push(e.path)})),t}},created:function(){this.updateMenu()},watch:{collapsed:function(e){e?(this.cachedOpenKeys=this.openKeys.concat(),this.openKeys=[]):this.openKeys=this.cachedOpenKeys},$route:function(){this.updateMenu()}},methods:{onOpenChange:function(e){var t=this;if("horizontal"!==this.mode){var n=e.find((function(e){return!t.openKeys.includes(e)}));this.rootSubmenuKeys.includes(n)?this.openKeys=n?[n]:[]:this.openKeys=e}else this.openKeys=e},onSelect:function(e){var t=e.item,n=e.key,a=e.selectedKeys;this.selectedKeys=a,this.$emit("select",{item:t,key:n,selectedKeys:a})},updateMenu:function(){var e=this.$route.matched.concat();e.length>=4&&this.$route.meta.hidden?(e.pop(),this.selectedKeys=[e[2].path]):this.selectedKeys=[e.pop().path];var t=[];"inline"===this.mode&&e.forEach((function(e){t.push(e.path)})),this.collapsed?this.cachedOpenKeys=t:this.openKeys=t},renderItem:function(e){return e.hidden?null:e.children&&!e.hideChildrenInMenu?this.renderSubMenu(e):this.renderMenuItem(e)},renderMenuItem:function(e){var t=this.$createElement,n=e.meta.target||null,a=n?"a":"router-link",o={to:{name:e.name}},r={href:e.path,target:e.meta.target};return t(B["a"].Item,H()([{},{key:e.path}]),[t(a,{props:N({},o),attrs:N({},r)},[this.renderIcon(e.meta.icon),t("span",[e.meta.title])])])},renderSubMenu:function(e){var t=this,n=this.$createElement,a=[];return e.hideChildrenInMenu||e.children.forEach((function(e){return a.push(t.renderItem(e))})),n(B["a"].SubMenu,H()([{},{key:e.path}]),[n("span",{slot:"title"},[this.renderIcon(e.meta.icon),n("span",[e.meta.title])]),a])},renderIcon:function(e){var t=this.$createElement;if("none"===e||void 0===e)return null;var n={};return"object"===Object($["a"])(e)?n.component=e:n.type=e,t(F["a"],{props:N({},n)})}},render:function(){var e=this,t=arguments[0],n={props:{mode:this.mode,theme:this.theme,openKeys:this.openKeys,selectedKeys:this.selectedKeys},on:{openChange:this.onOpenChange,select:this.onSelect}},a=this.menu.map((function(t){return t.hidden?null:e.renderItem(t)}));return t(B["a"],H()([{},n]),[a])}},U=G,z={name:"SideMenu",components:{Logo:D,SMenu:U},mixins:[b["a"],b["b"]],props:{mode:{type:String,required:!1,default:"inline"},theme:{type:String,required:!1,default:"dark"},collapsible:{type:Boolean,required:!1,default:!1},collapsed:{type:Boolean,required:!1,default:!1},menus:{type:Array,required:!0}},methods:{onSelect:function(e){this.$emit("menuSelect",e)}}},R=z,K=Object(l["a"])(R,S,C,!1,null,null,null),W=K.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"showHeader"}},[e.visible?n("div",{staticClass:"header-animat"},[e.visible?n("a-layout-header",{class:[e.fixedHeader&&"ant-header-fixedHeader",e.sidebarOpened?"ant-header-side-opened":"ant-header-side-closed"],staticStyle:{padding:"0"}},["sidemenu"===e.mode?n("div",{staticClass:"header"},["mobile"===e.device?n("a-icon",{staticClass:"trigger",attrs:{type:e.collapsed?"menu-fold":"menu-unfold"},on:{click:e.toggle}}):n("a-icon",{staticClass:"trigger",attrs:{type:e.collapsed?"menu-unfold":"menu-fold"},on:{click:e.toggle}}),n("user-menu")],1):n("div",{class:["top-nav-header-index",e.theme]},[n("div",{staticClass:"header-index-wide"},[n("div",{staticClass:"header-index-left"},["mobile"!==e.device?n("logo",{staticClass:"top-nav-header"}):e._e(),"mobile"!==e.device?n("s-menu",{attrs:{mode:"horizontal",menu:e.menus,theme:e.theme}}):n("a-icon",{staticClass:"trigger",attrs:{type:e.collapsed?"menu-fold":"menu-unfold"},on:{click:e.toggle}})],1),n("user-menu",{staticClass:"header-index-right"})],1)])]):e._e()],1):e._e()])},V=[],J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-wrapper"},[n("a",{attrs:{href:e.options.blog_url,target:"_blank"}},[n("a-tooltip",{attrs:{placement:"bottom",title:"点击跳转到首页"}},[n("span",{staticClass:"action"},[n("a-icon",{attrs:{type:"link"}})],1)])],1),n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.handleShowLayoutSetting}},[n("a-tooltip",{attrs:{placement:"bottom",title:"后台布局设置"}},[n("span",{staticClass:"action"},[n("a-icon",{attrs:{type:"setting"}})],1)])],1),n("header-comment",{staticClass:"action"}),n("a-dropdown",[e.user?n("span",{staticClass:"action ant-dropdown-link user-dropdown-menu"},[n("a-avatar",{staticClass:"avatar",attrs:{size:"small",src:e.user.avatar||"//cn.gravatar.com/avatar/?s=256&d=mm"}})],1):e._e(),n("a-menu",{staticClass:"user-dropdown-menu-wrapper",attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"0"},[n("router-link",{attrs:{to:{name:"Profile"}}},[n("a-icon",{attrs:{type:"user"}}),n("span",[e._v("个人资料")])],1)],1),n("a-menu-divider"),n("a-menu-item",{key:"1"},[n("a",{attrs:{href:"javascript:;"},on:{click:e.handleLogout}},[n("a-icon",{attrs:{type:"logout"}}),n("span",[e._v("退出登录")])],1)])],1)],1)],1)},Q=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-popover",{attrs:{trigger:"click",placement:"bottomRight",autoAdjustOverflow:!0,arrowPointAtCenter:!0,overlayStyle:{width:"300px",top:"50px"},title:"待审核评论"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("template",{slot:"content"},[n("div",{staticClass:"custom-tab-wrapper"},[n("a-tabs",{on:{change:e.handleTabsChanged},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-tab-pane",{key:"post",attrs:{tab:"文章"}},[n("a-list",{attrs:{loading:e.postCommentsLoading,dataSource:e.converttedPostComments},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{},[n("a-list-item-meta",[n("a-avatar",{staticClass:"bg-white",attrs:{slot:"avatar",src:t.avatar,size:"large"},slot:"avatar"}),n("template",{slot:"title"},[n("a",{attrs:{href:t.authorUrl,target:"_blank"}},[e._v(e._s(t.author))]),e._v("："),n("span",{domProps:{innerHTML:e._s(t.content)}})]),n("template",{slot:"description"},[e._v(" "+e._s(e._f("timeAgo")(t.createTime))+" ")])],2)],1)}}])})],1),n("a-tab-pane",{key:"sheet",attrs:{tab:"页面"}},[n("a-list",{attrs:{loading:e.sheetCommentsLoading,dataSource:e.converttedSheetComments},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{},[n("a-list-item-meta",[n("a-avatar",{staticClass:"bg-white",attrs:{slot:"avatar",src:t.avatar,size:"large"},slot:"avatar"}),n("template",{slot:"title"},[n("a",{attrs:{href:t.authorUrl,target:"_blank"}},[e._v(e._s(t.author))]),e._v("："),n("span",{domProps:{innerHTML:e._s(t.content)}})]),n("template",{slot:"description"},[e._v(" "+e._s(e._f("timeAgo")(t.createTime))+" ")])],2)],1)}}])})],1)],1)],1)]),n("span",{staticClass:"header-comment"},[e.postComments.length>0||e.sheetComments.length>0?n("a-badge",{attrs:{dot:""}},[n("a-icon",{attrs:{type:"bell"}})],1):n("a-badge",[n("a-icon",{attrs:{type:"bell"}})],1)],1)],2)},Z=[],ee=n("063c"),te=n("0e54"),ne=n.n(te),ae={name:"HeaderComment",data:function(){return{activeKey:"post",visible:!1,postComments:[],postCommentsLoading:!1,sheetComments:[],sheetCommentsLoading:!1}},computed:{converttedPostComments:function(){return this.postComments.map((function(e){return e.content=ne()(e.content),e}))},converttedSheetComments:function(){return this.sheetComments.map((function(e){return e.content=ne()(e.content),e}))}},created:function(){this.handleListPostAuditingComments(!1),this.handleListSheetAuditingComments(!1)},watch:{visible:function(e){e&&("post"===this.activeKey?this.handleListPostAuditingComments(!1):"sheet"===this.activeKey&&this.handleListSheetAuditingComments(!1))}},methods:{handleListPostAuditingComments:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.postCommentsLoading=!0),ee["a"].latestComment("posts",5,"AUDITING").then((function(t){e.postComments=t.data.data})).finally((function(){setTimeout((function(){e.postCommentsLoading=!1}),200)}))},handleListSheetAuditingComments:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.sheetCommentsLoading=!0),ee["a"].latestComment("sheets",5,"AUDITING").then((function(t){e.sheetComments=t.data.data})).finally((function(){setTimeout((function(){e.sheetCommentsLoading=!1}),200)}))},handleTabsChanged:function(e){"post"===e?this.handleListPostAuditingComments():"sheet"===e&&this.handleListSheetAuditingComments()}}},oe=ae,re=(n("b6e6"),Object(l["a"])(oe,X,Z,!1,null,"897ff970",null)),ie=re.exports;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le,ue={name:"UserMenu",components:{HeaderComment:ie},computed:ce({},Object(g["c"])(["user","options"])),methods:ce(ce({},Object(g["b"])(["logout","ToggleLayoutSetting"])),{},{handleLogout:function(){var e=this;this.$confirm({title:"提示",content:"确定要注销登录吗 ?",onOk:function(){return e.logout({}).then((function(){window.location.reload()})).catch((function(t){e.$message.error({title:"错误",description:t.message})}))},onCancel:function(){}})},handleShowLayoutSetting:function(){this.ToggleLayoutSetting(!0)}})},de=ue,fe=Object(l["a"])(de,J,Q,!1,null,null,null),me=fe.exports,he={name:"GlobalHeader",components:{UserMenu:me,SMenu:U,Logo:D},mixins:[b["a"]],props:{mode:{type:String,default:"sidemenu"},menus:{type:Array,required:!0},theme:{type:String,required:!1,default:"dark"},collapsed:{type:Boolean,required:!1,default:!1},device:{type:String,required:!1,default:"desktop"}},data:function(){return{visible:!0,oldScrollTop:0}},mounted:function(){document.addEventListener("scroll",this.handleScroll,{passive:!0})},methods:{handleScroll:function(){var e=this;if(this.autoHideHeader){var t=document.body.scrollTop+document.documentElement.scrollTop;this.ticking||(this.ticking=!0,requestAnimationFrame((function(){e.oldScrollTop>t?e.visible=!0:t>300&&e.visible?e.visible=!1:t<300&&!e.visible&&(e.visible=!0),e.oldScrollTop=t,e.ticking=!1})))}},toggle:function(){this.$emit("toggle")}},beforeDestroy:function(){document.body.removeEventListener("scroll",this.handleScroll,!0)}},pe=he,ge=(n("05fe"),Object(l["a"])(pe,Y,V,!1,null,null,null)),be=ge.exports,ve=be,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer text-center",staticStyle:{padding:"0 16px",margin:"48px 0 0"}},[n("div",{staticClass:"copyright",staticStyle:{color:"rgba(0, 0, 0, 0.45)","font-size":"14px"}},[e._v(" Proudly power by "),n("router-link",{attrs:{to:{name:"About"}}},[e._v(" Halo ")])],1)])},ke=[],Oe={name:"GlobalFooter"},je=Oe,we=Object(l["a"])(je,ye,ke,!1,null,null,null),Se=we.exports,Ce=Se,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"settingDrawer",staticClass:"setting-drawer"},[n("a-drawer",{attrs:{width:"300",closable:"",visible:e.layoutSetting},on:{close:e.onClose}},[n("div",{staticClass:"setting-drawer-index-content"},[n("div",{staticClass:"mb-6"},[n("h3",{staticClass:"setting-drawer-index-title"},[e._v("整体风格设置")]),n("div",{staticClass:"setting-drawer-index-blockChecbox"},[n("a-tooltip",[n("template",{slot:"title"},[e._v("暗色菜单风格")]),n("div",{staticClass:"setting-drawer-index-item",on:{click:function(t){return e.handleMenuTheme("dark")}}},[n("img",{attrs:{src:"/images/dark.svg",alt:"dark"}}),"dark"===e.navTheme?n("div",{staticClass:"setting-drawer-index-selectIcon"},[n("a-icon",{attrs:{type:"check"}})],1):e._e()])],2),n("a-tooltip",[n("template",{slot:"title"},[e._v("亮色菜单风格")]),n("div",{staticClass:"setting-drawer-index-item",on:{click:function(t){return e.handleMenuTheme("light")}}},[n("img",{attrs:{src:"/images/dark.svg",alt:"light"}}),"dark"!==e.navTheme?n("div",{staticClass:"setting-drawer-index-selectIcon"},[n("a-icon",{attrs:{type:"check"}})],1):e._e()])],2)],1)]),n("a-divider"),n("div",{staticClass:"mb-6"},[n("h3",{staticClass:"setting-drawer-index-title"},[e._v("主题色")]),n("div",{staticClass:"h-5"},e._l(e.colorList,(function(t,a){return n("a-tooltip",{key:a,staticClass:"setting-drawer-theme-color-colorBlock"},[n("template",{slot:"title"},[e._v(e._s(t.key))]),n("a-tag",{attrs:{color:t.color},on:{click:function(n){return e.changeColor(t.color)}}},[t.color===e.primaryColor?n("a-icon",{attrs:{type:"check"}}):e._e()],1)],2)})),1)]),n("a-divider"),n("div",{staticClass:"mb-6"},[n("h3",{staticClass:"setting-drawer-index-title"},[e._v("导航模式")]),n("div",{staticClass:"setting-drawer-index-blockChecbox"},[n("div",{staticClass:"setting-drawer-index-item",on:{click:function(t){return e.handleLayout("sidemenu")}}},[n("img",{attrs:{src:"/images/sidemenu.svg",alt:"sidemenu"}}),"sidemenu"===e.layoutMode?n("div",{staticClass:"setting-drawer-index-selectIcon"},[n("a-icon",{attrs:{type:"check"}})],1):e._e()]),n("div",{staticClass:"setting-drawer-index-item",on:{click:function(t){return e.handleLayout("topmenu")}}},[n("img",{attrs:{src:"/images/topmenu.svg",alt:"topmenu"}}),"sidemenu"!==e.layoutMode?n("div",{staticClass:"setting-drawer-index-selectIcon"},[n("a-icon",{attrs:{type:"check"}})],1):e._e()])])]),n("a-divider"),n("div",{staticClass:"mt-6"},[n("a-list",{attrs:{split:!1}},[n("a-list-item",[n("a-tooltip",{attrs:{slot:"actions"},slot:"actions"},[n("template",{slot:"title"},[e._v(" 该设定仅 [顶部栏导航] 时有效 ")]),n("a-select",{staticStyle:{width:"80px"},attrs:{size:"small",defaultValue:e.contentWidth},on:{change:e.handleContentWidthChange}},[n("a-select-option",{attrs:{value:"Fixed"}},[e._v("固定")]),"sidemenu"!=e.layoutMode?n("a-select-option",{attrs:{value:"Fluid"}},[e._v("流式")]):e._e()],1)],2),n("a-list-item-meta",[n("div",{attrs:{slot:"title"},slot:"title"},[e._v("内容区域宽度")])])],1),n("a-list-item",[n("a-switch",{attrs:{slot:"actions",size:"small",defaultChecked:e.fixedHeader},on:{change:e.handleFixedHeader},slot:"actions"}),n("a-list-item-meta",[n("div",{attrs:{slot:"title"},slot:"title"},[e._v("固定 Header")])])],1),n("a-list-item",[n("a-switch",{attrs:{slot:"actions",size:"small",disabled:!e.fixedHeader,defaultChecked:e.autoHideHeader},on:{change:e.handleFixedHeaderHidden},slot:"actions"}),n("a-list-item-meta",[n("a-tooltip",{attrs:{slot:"title",placement:"left"},slot:"title"},[n("template",{slot:"title"},[e._v("固定 Header 时可配置")]),n("div",{style:{opacity:e.fixedHeader?"1":"0.5"}},[e._v("下滑时隐藏 Header")])],2)],1)],1),n("a-list-item",[n("a-switch",{attrs:{slot:"actions",size:"small",disabled:"topmenu"===e.layoutMode,defaultChecked:e.fixSiderbar},on:{change:e.handleFixSiderbar},slot:"actions"}),n("a-list-item-meta",[n("div",{style:{opacity:"topmenu"===e.layoutMode?"0.5":"1"},attrs:{slot:"title"},slot:"title"},[e._v("固定侧边菜单")])])],1)],1)],1),n("a-divider")],1)])],1)},xe=[],Te=n("f64c"),Ee=[{key:"红色",color:"#F5222D"},{key:"浅红色",color:"#FA541C"},{key:"日暮",color:"#FAAD14"},{key:"青色",color:"#13C2C2"},{key:"绿色",color:"#52C41A"},{key:"默认",color:"#1890FF"},{key:"蓝色",color:"#2F54EB"},{key:"紫色",color:"#722ED1"}],Le=function(e){if(e){var t=Te["a"].loading("正在编译主题！",0);if(le)r();else{var n=document.createElement("link"),a=document.createElement("script"),o=document.createElement("script");n.setAttribute("rel","stylesheet/less"),n.setAttribute("href","/color.less"),a.innerHTML="\n      window.less = {\n        async: true,\n        env: 'production',\n        javascriptEnabled: true\n      };\n    ",o.src="https://cdn.jsdelivr.net/npm/less@3.8.1/dist/less.min.js",o.async=!0,o.onload=function(){r(),o.onload=null},document.body.appendChild(n),document.body.appendChild(a),document.body.appendChild(o),le=!0}}function r(){window.less&&setTimeout((function(){window.less.modifyVars({"@primary-color":e}).then((function(){t()})).catch((function(){Te["a"].error("Failed to update theme"),t()}))}),200)}};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae={mixins:[b["a"],b["b"]],data:function(){return{colorList:Ee,baseConfig:Object.assign({},v["a"])}},watch:{},mounted:function(){this.primaryColor!==v["a"].primaryColor&&Le(this.primaryColor)},computed:Me({},Object(g["c"])(["layoutSetting"])),methods:Me(Me({},Object(g["b"])(["setSidebar","ToggleLayoutSetting"])),{},{onClose:function(){this.ToggleLayoutSetting(!1)},handleMenuTheme:function(e){this.baseConfig.navTheme=e,this.$store.dispatch("ToggleTheme",e)},handleLayout:function(e){this.baseConfig.layout=e,this.$store.dispatch("ToggleLayoutMode",e),this.handleFixSiderbar(!1),"sidemenu"===e&&this.handleContentWidthChange("Fixed")},handleContentWidthChange:function(e){this.baseConfig.contentWidth=e,this.$store.dispatch("ToggleContentWidth",e)},changeColor:function(e){this.baseConfig.primaryColor=e,this.primaryColor!==e&&(this.$store.dispatch("ToggleColor",e),document.body.style.setProperty("--themeColor",e),Le(e))},handleFixedHeader:function(e){this.baseConfig.fixedHeader=e,this.$store.dispatch("ToggleFixedHeader",e)},handleFixedHeaderHidden:function(e){this.baseConfig.autoHideHeader=e,this.$store.dispatch("ToggleFixedHeaderHidden",e)},handleFixSiderbar:function(e){if("topmenu"===this.layoutMode)return this.baseConfig.fixSiderbar=!1,void this.$store.dispatch("ToggleFixSiderbar",!1);this.baseConfig.fixSiderbar=e,this.$store.dispatch("ToggleFixSiderbar",e)}})},De=Ae,Ie=(n("5f69"),Object(l["a"])(De,_e,xe,!1,null,"07dead42",null)),He=Ie.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{title:"重新登录",footer:null,width:320,maskClosable:!1},on:{cancel:e.handleCancelLogin},model:{value:e.loginModal,callback:function(t){e.loginModal=t},expression:"loginModal"}},[n("LoginForm",{on:{success:e.onLoginSucceed}})],1)],1)},Be=[],Fe=n("fe86");function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={name:"LoginModal",components:{LoginForm:Fe["a"]},computed:Ne({},Object(g["c"])(["loginModal"])),methods:Ne(Ne({},Object(g["b"])(["ToggleLoginModal"])),{},{onLoginSucceed:function(){this.$emit("success"),location.reload()},handleCancelLogin:function(){this.ToggleLoginModal(!1)}})},Ue=Ge,ze=Object(l["a"])(Ue,$e,Be,!1,null,"0a8bff1a",null),Re=ze.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.$store.state.chat.isShow,title:"Chat",footer:null,centered:"",bodyStyle:e.dialogBody,"dialog-style":{top:"0px",margin:"0px",padding:"0px",height:"100%"}},on:{cancel:e.cancel}},[n("div",{staticClass:"dialogDiv"},[n("div",{staticClass:"q-pa-md row justify-center",staticStyle:{padding:"0",margin:"0"}},[n("q-scroll-area",{ref:"scrollArea",class:e.emojiBoxShow?"dialogScroll-emoji":"dialogScroll",attrs:{"thumb-style":e.thumbStyle},on:{scroll:e.onScroll}},[n("q-spinner-ios",{directives:[{name:"show",rawName:"v-show",value:e.hasNextPage,expression:"hasNextPage"}],staticStyle:{margin:"10px 45%"},attrs:{color:"primary",size:"2em"}}),e._l(e.msgList,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"myMsg",staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","margin-top":"4px"},on:{click:function(t){e.msgIndex=a}}},[e.admin!==t.nickname||t.hasOwnProperty("label")?e._e():n("div",{staticClass:"icons-list",staticStyle:{margin:"auto 0px 10px auto"}},[a==e.msgIndex?n("i",{on:{click:function(n){return e.quoteMsg(t)}}},[n("quote-icon")],1):e._e(),(new Date).getTime()-t.time<=2e5&&a==e.msgIndex?n("i",{on:{click:function(n){return e.rollBackMsg(t.id)}}},[n("roll-back-icon")],1):e._e(),a==e.msgIndex?n("i",{on:{click:function(n){return e.copyMsg(t.payload)}}},[n("copy-icon")],1):e._e()]),t.hasOwnProperty("label")?n("q-chat-message",{staticStyle:{width:"100%","text-align":"center",height:"20px","margin-top":"5px","margin-bottom":"5px",padding:"0"},attrs:{label:t.label+" 撤回一条消息"}}):n("q-chat-message",{attrs:{name:t.nickname,avatar:t.avatar,text:[e.imgPreview(t.payload)],stamp:e.timeFormat(t.time),"bg-color":e.admin===t.nickname?"green-4":"indigo-1","text-color":(e.admin,t.nickname,"black"),sent:e.admin===t.nickname}}),e.admin===t.nickname||t.hasOwnProperty("label")?e._e():n("div",{staticClass:"icons-list",staticStyle:{margin:"auto auto 10px 5px"}},[a==e.msgIndex?n("i",{on:{click:function(n){return e.copyMsg(t.payload)}}},[n("copy-icon")],1):e._e(),a==e.msgIndex?n("i",{on:{click:function(n){return e.quoteMsg(t)}}},[n("quote-icon")],1):e._e()])],1),t.quoteMsg?n("div",[n("a-row",{class:e.admin!==t.nickname?"quote-left":"quote-right",staticStyle:{"max-width":"calc(80% - 56px)","margin-top":"-5px"},attrs:{type:"flex",justify:e.admin!==t.nickname?"start":"end"}},[n("div",{staticStyle:{"background-color":"#f5f3f3","border-radius":"5px"}},[n("div",{staticClass:"quote-text"},[e._v(" "+e._s(t.quoteFrom+": "+e.replaceImgTag(t.quoteMsg))+" ")])])])],1):e._e()])}))],2)],1),n("div",{staticClass:"dialogInput"},[e.quoteText?n("a-row",{staticClass:"quoteBanner",attrs:{type:"flex",justify:"space-between"}},[n("span",{staticStyle:{"font-size":"smaller","max-width":"90%","margin-left":"4px",color:"grey",display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"1"}},[e._v(e._s(e.quoteText))]),n("a-icon",{staticStyle:{color:"red",margin:"3px 4px auto auto"},attrs:{type:"close-circle"},on:{click:e.closeQuote}})],1):e._e(),n("q-input",{ref:"inputArea",attrs:{color:"teal",outlined:"",type:"textarea",rows:"1.5"},on:{focus:e.inputFocus,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.newLine(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"face",color:"green-4"},on:{click:e.emojiBtnClick}}),n("q-separator",{attrs:{vertical:"",inset:""}}),n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send",color:"green"},on:{click:e.sendMsg}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e.emojiBoxShow?n("div",{staticClass:"emoji"},[e._l(106,(function(t,a){return n("img",{key:a,staticClass:"emoji-item",attrs:{src:e.emojiBaseUrl+(t<10?"0"+t:t)+".png"},on:{click:function(n){e.sendEmoji(e.emojiBaseUrl+(t<10?"0"+t:t)+".png","50%")}}})})),n("img",{staticClass:"emoji-item",attrs:{src:"https://img.zcool.cn/community/0167eb5efe8bcaa801215aa0ac4d2a.gif"},on:{click:function(t){return e.sendEmoji("https://img.zcool.cn/community/0167eb5efe8bcaa801215aa0ac4d2a.gif","60%")}}}),n("img",{staticClass:"emoji-item",attrs:{src:"https://img.zcool.cn/community/01c4595efe8bc9a8012066218fc76c.gif"},on:{click:function(t){return e.sendEmoji("https://img.zcool.cn/community/01c4595efe8bc9a8012066218fc76c.gif","60%")}}}),n("img",{staticClass:"emoji-item",attrs:{src:"https://img.zcool.cn/community/015c7c5efe8bc9a801215aa05320c5.gif"},on:{click:function(t){return e.sendEmoji("https://img.zcool.cn/community/015c7c5efe8bc9a801215aa05320c5.gif","60%")}}}),n("img",{staticClass:"emoji-item",attrs:{src:"https://img.zcool.cn/community/01f36c60628dbc11013e87f42cf370.gif"},on:{click:function(t){return e.sendEmoji("https://img.zcool.cn/community/01f36c60628dbc11013e87f42cf370.gif","60%")}}})],2):e._e()],1)])])],1)},We=[],Ye=n("2909"),Ve=(n("96cf"),n("1da1")),Je=(n("a481"),n("6b54"),n("f559"),n("9158")),Qe=n("9efd"),Xe="/api/chat",Ze={history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return console.log("查询历史记录。。。。"+e),Object(Qe["a"])({url:"".concat(Xe,"/history?pageNum=").concat(t,"&pageSize=").concat(n,"&lastIndex=").concat(e),method:"get"})},unreadCount:function(e){return Object(Qe["a"])({url:"".concat(Xe,"/unread_count?id=").concat(e),method:"get"})},clearUnread:function(){return Object(Qe["a"])({url:"".concat(Xe,"/clear_unread"),method:"get"})}},et=Ze,tt={template:'\n<svg fill="currentColor" width="200px" height="200.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M945.472 208.192a46.144 46.144 0 0 0-12.032-30.272c-0.896-1.152-1.344-2.432-2.368-3.456-1.024-1.024-2.24-1.472-3.392-2.368a46.72 46.72 0 0 0-30.336-11.968l-0.768 0.128c-0.256 0-0.256-0.128-0.576-0.128h-118.656V49.472l-0.128-0.704 0.128-0.704a46.144 46.144 0 0 0-12.032-30.272c-0.896-1.152-1.344-2.432-2.368-3.456-1.024-1.024-2.24-1.472-3.392-2.368A46.4 46.4 0 0 0 729.344 0l-0.768 0.128L727.872 0H337.6c-0.512 0-0.896 0.256-1.344 0.256a49.472 49.472 0 0 0-36.096 14.528L93.056 230.848a49.28 49.28 0 0 0-13.504 41.024c-0.256 1.984-1.024 3.776-1.024 5.888v536.832l0.128 0.64-0.128 0.768c0 11.904 4.864 22.528 12.352 30.848 0.64 0.896 1.152 1.984 1.792 2.752 1.344 1.28 2.88 1.856 4.224 3.008a46.784 46.784 0 0 0 29.504 11.392l0.512-0.128 0.64 0.128H237.44v110.656l0.128 0.64-0.128 0.832a45.44 45.44 0 0 0 12.352 30.784c0.64 0.96 1.152 1.984 1.792 2.752 1.344 1.344 2.88 1.856 4.224 3.008 8.32 6.656 18.176 11.328 29.568 11.328l0.512-0.128 0.64 0.128h609.792l0.512-0.128 0.64 0.128c11.328 0 21.12-4.544 29.44-11.456 1.28-1.152 3.136-1.664 4.288-3.008 0.768-0.768 1.216-1.792 1.792-2.752a46.848 46.848 0 0 0 12.352-30.784l-0.128-0.832 0.128-0.64V209.6l-0.128-0.704c0.064-0.256 0.256-0.448 0.256-0.704z m-264-112v64H505.664c-0.576 0-0.96 0.256-1.344 0.256a49.28 49.28 0 0 0-36.096 14.528l-62.72 62.72V96.192h275.968zM477.376 301.504v98.624H378.624l98.752-98.624zM309.376 141.44v98.624H210.624L309.376 141.44z m-57.344 249.472a49.088 49.088 0 0 0-13.504 40.96c-0.192 1.984-1.024 3.776-1.024 5.888v330.112h-62.976V336.128h132.352l45.888-45.888-100.736 100.672z m597.44 536.96H333.504V496.128h190.528l0.704-0.128 0.704 0.128a46.464 46.464 0 0 0 30.272-12.032c1.152-0.832 2.368-1.344 3.392-2.304s1.472-2.304 2.368-3.392a46.72 46.72 0 0 0 12.032-30.272l-0.128-0.768 0.128-0.64V256.192h276.032l-0.064 671.68zM614.272 616.256h133.504a35.136 35.136 0 0 0 35.648-34.624 35.136 35.136 0 0 0-35.648-34.752h-133.504a35.136 35.136 0 0 0-35.648 34.752c0 19.072 15.872 34.624 35.648 34.624zM496.768 546.88H452.48a35.2 35.2 0 0 0-35.712 34.752c0 19.072 16 34.624 35.712 34.624h44.224a35.2 35.2 0 0 0 35.712-34.624 35.2 35.2 0 0 0-35.648-34.752zM614.272 724.032h133.504a35.072 35.072 0 0 0 35.648-34.624 35.2 35.2 0 0 0-35.648-34.752h-133.504a35.2 35.2 0 0 0-35.648 34.752c0 19.136 15.872 34.624 35.648 34.624zM496.768 654.656H452.48a35.2 35.2 0 0 0-35.712 34.752c0 19.136 16 34.624 35.712 34.624h44.224a35.2 35.2 0 0 0 35.712-34.624 35.264 35.264 0 0 0-35.648-34.752zM614.272 832.128h133.504c19.776 0 35.648-15.488 35.648-34.624s-15.872-34.624-35.648-34.624h-133.504c-19.776 0-35.648 15.488-35.648 34.624s15.872 34.624 35.648 34.624zM496.768 762.88H452.48c-19.712 0-35.712 15.488-35.712 34.624s16 34.624 35.712 34.624h44.224c19.712 0 35.712-15.488 35.712-34.624s-16-34.624-35.648-34.624z" />\n</svg>\n  '},nt={template:'\n  <svg fill="currentColor" width="200px" height="200.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M289.6384 256H614.4a307.2 307.2 0 1 1 0 614.4H204.8a51.2 51.2 0 0 1 0-102.4h409.6a204.8 204.8 0 1 0 0-409.6H286.0032l59.2384 59.2384A51.2 51.2 0 1 1 272.7936 489.984L128 345.2416a51.2 51.2 0 0 1 0-72.448L272.7936 128a51.2 51.2 0 0 1 72.448 72.3968L289.6384 256z"  /></svg>\n  '},at={template:'\n  <svg fill="currentColor" width="200px" height="200.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M277.942857 416.914286h285.257143V204.8H219.428571v51.2h292.571429V365.714286H219.428571v219.428571h292.571429c0 87.771429-7.314286 146.285714-14.628571 168.228572-7.314286 21.942857-36.571429 36.571429-95.085715 36.571428h-73.142857l14.628572 51.2h65.828571c80.457143 0 124.342857-21.942857 131.657143-65.828571 21.942857-36.571429 29.257143-117.028571 29.257143-234.057143h-292.571429V416.914286zM950.857143 0H73.142857C36.571429 0 0 36.571429 0 73.142857v877.714286c0 36.571429 36.571429 73.142857 73.142857 73.142857h877.714286c36.571429 0 73.142857-36.571429 73.142857-73.142857V73.142857c0-36.571429-36.571429-73.142857-73.142857-73.142857z m21.942857 950.857143c0 14.628571-7.314286 21.942857-21.942857 21.942857H73.142857c-14.628571 0-21.942857-7.314286-21.942857-21.942857V73.142857C51.2 58.514286 58.514286 51.2 73.142857 51.2h877.714286c14.628571 0 21.942857 7.314286 21.942857 21.942857v877.714286zM731.428571 848.457143h51.2V175.542857H731.428571v672.914286z" /></svg>\n  '},ot={template:'\n    <a-icon :component="copySvg" />\n  ',data:function(){return{copySvg:tt}}},rt={template:'\n    <a-icon :component="rollBackSvg" />\n  ',data:function(){return{rollBackSvg:nt}}},it={template:'\n    <a-icon :component="quoteSvg" />\n  ',data:function(){return{quoteSvg:at}}},st={components:{copyIcon:ot,rollBackIcon:rt,quoteIcon:it},name:"ChatModal",data:function(){return{msgIndex:-1,quoteObj:{},quoteText:"",emojiBoxShow:!1,emojiBaseUrl:"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/shoubai_emoji_face_",admin:"",text:"",lastSendMsg:{},msgList:[],lastMsg:{},lastSize:999,hasNextPage:!0,isLock:!1,dialogBody:{},contentStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},contentActiveStyle:{backgroundColor:"#eee",color:"black"},thumbStyle:{right:"2px",borderRadius:"3px",backgroundColor:"#027be3",width:"3px",opacity:.15}}},watch:{"$store.state.chat.isShow":{handler:function(){var e=this,t=this.$store.state.chat.isShow,n=this.$store.state.chat.hasNewMsg;t&&0==this.msgList.length?this.queryHistory((function(){console.log("初次进入跳转尾页"),setTimeout((function(){e.$refs.scrollArea.setScrollPercentage(1.1),e.lastSize=e.$refs.scrollArea.getScrollPosition(),e.$store.commit("SET_LAST_MSG_ID",e.msgList[e.msgList.length-1].id),e.isLock=!1,e.clearUnread(),e.$store.commit("SET_HAS_NEW_MESSAGE",!1)}),350)})):t&&n&&(console.log("有新的未读消息，跳到最下方"),setTimeout((function(){e.$refs.scrollArea.setScrollPercentage(1),e.$store.commit("SET_LAST_MSG_ID",e.msgList[e.msgList.length-1].id)}),300))}}},methods:{imgPreview:function(e){return e.toString().startsWith("<img")?e.replace("<img",'<img preview="1" onerror="this.src=\'/images/img-error.png\'"'):e},newLine:function(){this.text=this.text+"<br>"},replaceImgTag:function(e){return e.replace(/<img[^>]+>/g,"[图片]")},closeQuote:function(){this.quoteText="",this.quoteObj={}},quoteMsg:function(e){var t=this.replaceImgTag(e.payload);this.quoteText=e.nickname+": "+t,this.quoteObj.refId=e.id,this.quoteObj.quoteMsg=e.payload,this.quoteObj.quoteFrom=e.nickname},rollBackMsg:function(e){var t={seq:(new Date).getTime(),msg:e,type:3};this.$EventBus.$emit("sendMsg",t)},copyMsg:function(e){var t=this;this.$copyText(e).then((function(e){t.$log.debug("copy",e),t.$message.success("复制成功！")})).catch((function(e){t.$log.debug("copy.err",e),t.$message.error("复制失败！")}))},animateScroll:function(e){this.$refs.scrollArea.setScrollPercentage(e,400)},inputFocus:function(){this.emojiBoxShow=!1},emojiBtnClick:function(){this.emojiBoxShow=!this.emojiBoxShow,this.$refs.inputArea.blur()},onScroll:function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.verticalPosition>100&&(this.isLock=!1),this.hasNextPage){e.next=3;break}return e.abrupt("return");case 3:if(0!=t.verticalPosition){e.next=6;break}return e.next=6,this.queryHistory((function(){setTimeout((function(){n.$refs.scrollArea.setScrollPosition(t.verticalSize-n.lastSize),n.lastSize=t.verticalSize,n.isLock=!1}),600)}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancel:function(){this.$store.commit("SET_CHAT_SHOW")},timeFormat:function(e){return Object(Je["a"])(e,"MM-DD HH:mm:ss")},sendMsg:function(){if(this.emojiBoxShow=!1,this.text&&0!==this.text.trim().length){var e={seq:(new Date).getTime(),msg:this.quoteText?{msg:this.text,refId:this.quoteObj.refId,quoteFrom:this.quoteObj.quoteFrom,quoteMsg:this.quoteObj.quoteMsg}:this.text,type:this.quoteText?4:1};this.lastSendMsg=e,this.$EventBus.$emit("sendMsg",e),this.$refs.inputArea.focus()}else this.$message.error("发送消息不能为空！")},sendEmoji:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",n='<img src="'.concat(e,'" width="').concat(t,'" alt="图裂了" />'),a={seq:(new Date).getTime(),msg:n,type:1};this.lastSendMsg=a,this.$EventBus.$emit("sendMsg",a)},createCardData:function(e){if("roll_back"===e.type)for(var t=this.msgList.length-1;t>=0;t--)if(this.msgList[t].id===e.id){this.msgList.splice(t,1),e.label=e.nickname;break}this.msgList.push(e),this.$store.state.chat.isShow&&(this.animateScroll(1.1),this.$store.commit("SET_LAST_MSG_ID",e.id),this.clearUnread())},queryHistory:function(e){var t=this;if(!this.isLock){this.isLock=!0;var n="";this.msgList.length>0&&(n=this.msgList[0].id),et.history(n).then((function(n){var a,o=n.data.data.records;t.hasNextPage=n.data.data.current<n.data.data.pages,o.reverse(),(a=t.msgList).unshift.apply(a,Object(Ye["a"])(o)),"function"==typeof e&&e(),t.$previewRefresh()}))}},computed:function(){},clearUnread:function(){var e={seq:(new Date).getTime(),msg:this.msgList[this.msgList.length-1].id,type:2};console.log("最后查看id："+this.msgList[this.msgList.length-1].id),this.$EventBus.$emit("sendMsg",e)}},created:function(){var e=this;this.admin=JSON.parse(localStorage.getItem("halo__USER")).value.nickname,this.$EventBus.$on("receiveMsg",(function(t){e.createCardData(t),t.seq==e.lastSendMsg.seq&&(e.text="",e.closeQuote())}))},mounted:function(){},beforeDestroy:function(){this.$EventBus.$off("sendMsg")}},ct=st,lt=(n("7e58"),n("4983")),ut=n("d9b2"),dt=n("8169"),ft=n("27f9"),mt=n("9c40"),ht=n("eb85"),pt=n("93dc"),gt=n.n(pt),bt=Object(l["a"])(ct,Ke,We,!1,null,"3b238f6b",null),vt=bt.exports;gt()(bt,"components",{QScrollArea:lt["a"],QSpinnerIos:ut["a"],QChatMessage:dt["a"],QInput:ft["a"],QBtn:mt["a"],QSeparator:ht["a"]});var yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.chat.isShow,expression:"!$store.state.chat.isShow"}],class:[e.hasNewMsg?"haloBtn":"","fixedBtn"],attrs:{type:"primary",shape:"circle",disabled:!e.connected},on:{click:e.showChatModal}},[n("a-badge",{attrs:{dot:"",count:e.onlineCount-1}},[n("a-icon",{attrs:{type:"message"}})],1)],1)},kt=[],Ot={name:"HaloButton",data:function(){return{connected:!1,hasNewMsg:!1,onlineCount:0,websock:null,userClose:!1,lockReconnect:!1,timeout:28e3,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null}},watch:{"$store.state.chat.isShow":{handler:function(){this.$store.state.chat.isShow&&(this.hasNewMsg=!1)}}},methods:{showChatModal:function(){this.$store.commit("SET_CHAT_SHOW")},initWebSocket:function(){var e="wss://2233996.xyz/websocket/chat?admin_token="+JSON.parse(localStorage.getItem("halo__Access-Token")).value.access_token;this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},reconnect:function(){if(this.connected=!1,!this.userClose){console.log("------进入ws重连------");var e=this;e.lockReconnect||(e.lockReconnect=!0,e.timeoutnum&&clearTimeout(e.timeoutnum),e.timeoutnum=setTimeout((function(){e.initWebSocket(),e.lockReconnect=!1}),5e3))}},reset:function(){var e=this;clearTimeout(e.timeoutObj),clearTimeout(e.serverTimeoutObj),e.start()},stopWs:function(){var e=this;clearTimeout(e.timeoutObj),clearTimeout(e.serverTimeoutObj),e.websock.close(),e.websock=null},start:function(){var e=this;e.timeoutObj&&clearTimeout(e.timeoutObj),e.serverTimeoutObj&&clearTimeout(e.serverTimeoutObj),e.timeoutObj=setTimeout((function(){1==e.websock.readyState?e.websock.send(JSON.stringify({msg:"ping",type:0})):e.reconnect(),e.serverTimeoutObj=setTimeout((function(){e.websock.close()}),e.timeout)}),e.timeout)},websocketonopen:function(){console.log("ws连接成功"),this.connected=!0,this.start()},websocketonerror:function(e){console.log("WebSocket连接发生错误:",e),this.reconnect()},websocketclose:function(e){console.log("connection closed ("+e.code+")"),this.reconnect()},websocketonmessage:function(e){var t=JSON.parse(e.data);switch(t.type){case"chat":case"roll_back":this.$EventBus.$emit("receiveMsg",t),this.$store.state.chat.isShow||(this.hasNewMsg=!0,this.$store.commit("SET_HAS_NEW_MESSAGE",!0));break;case"pong":console.log("pong:"+t.payload),-1!=this.$store.state.chat.lastMsgId&&t.payload>this.$store.state.chat.lastMsgId&&(this.hasNewMsg=!0);break;case"online":this.$message.info(t.nickname+"上线啦！"),this.onlineCount=t.payload;break;case"offline":this.$message.warn(t.nickname+"下线了"),this.onlineCount=t.payload;break;case"authenticate":this.onlineCount=t.payload,0==t.payload&&this.$message.error("chat登陆失败！");break;case"auth_err":console.log("--------auth_err------"),this.userClose=!0,this.stopWs(),this.$notification["error"]({message:"账号认证错误",description:t.payload,placement:"bottomRight",duration:10,btn:function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return window.location.reload()}}},"确定")},onClose:close});break;case"error":this.$message.error(t.payload)}this.reset()},websocketsend:function(e){this.websock.send(e)}},computed:{},created:function(){var e=this;this.$EventBus.$on("sendMsg",(function(t){1==e.websock.readyState?(console.log("准备发送消息："+JSON.stringify(t)),e.websocketsend(JSON.stringify(t))):e.$message.error("聊天服务器连接失败！")}))},mounted:function(){var e=this,t=JSON.parse(localStorage.getItem("halo__DEFAULT_COLOR")).value;t||(t="#1890FF"),document.body.style.setProperty("--themeColor",t),this.websock||(console.log("初始化ws"),this.initWebSocket()),console.log(JSON.parse(localStorage.getItem("halo__USER")).value.id),et.unreadCount(JSON.parse(localStorage.getItem("halo__USER")).value.id).then((function(t){var n=t.data.data;n>0&&(e.hasNewMsg=!0,e.$message.success("您有 ".concat(n," 条离线消息未读！"),4.5))}))},beforeDestroy:function(){this.$EventBus.$off("receiveMsg")}},jt=Ot,wt=(n("2065"),Object(l["a"])(jt,yt,kt,!1,null,"985436ba",null)),St=wt.exports;function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt={name:"BasicLayout",mixins:[b["a"],b["b"]],components:{HaloButton:St,RouteView:w,SideMenu:W,GlobalHeader:ve,GlobalFooter:Ce,SettingDrawer:He,LoginModal:Re,ChatModal:vt},data:function(){return{production:v["a"].production,collapsed:!1,menus:[]}},computed:_t(_t({},Object(g["e"])({mainMenu:function(e){return e.permission.addRouters}})),{},{contentPaddingLeft:function(){return!this.fixSidebar||this.isMobile()?"0":this.sidebarOpened?"256px":"80px"}}),watch:{sidebarOpened:function(e){this.collapsed=!e}},created:function(){this.menus=y["a"].find((function(e){return"/"===e.path})).children,this.collapsed=!this.sidebarOpened},mounted:function(){var e=this,t=navigator.userAgent;t.indexOf("Edge")>-1&&this.$nextTick((function(){e.collapsed=!e.collapsed,setTimeout((function(){e.collapsed=!e.collapsed}),16)}))},methods:_t(_t({},Object(g["b"])(["setSidebar","ToggleLoginModal"])),{},{toggle:function(){this.collapsed=!this.collapsed,this.setSidebar(!this.collapsed),Object(p["c"])()},paddingCalc:function(){var e="";return e=this.sidebarOpened?this.isDesktop()?"256px":"80px":(this.isMobile()?"0":this.fixSidebar&&"80px")||"0",e},menuSelect:function(){this.isDesktop()||(this.collapsed=!1)},drawerClose:function(){this.collapsed=!1},onLoginSucceed:function(){this.ToggleLoginModal(!1)},refreshPage:function(){window.location.reload()}})},Tt=xt,Et=(n("6692"),Object(l["a"])(Tt,f,m,!1,null,null,null)),Lt=Et.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.$route.meta.hiddenHeaderContent?null:"margin: -24px -24px 0px;"},[e.affix?n("a-affix",[e.$route.meta.hiddenHeaderContent?e._e():n("div",{staticClass:"page-header"},[n("div",{staticClass:"page-header-index-wide"},[n("a-page-header",{attrs:{title:e.title,"sub-title":e.subTitle,breadcrumb:{props:{routes:e.breadList}}}},[e._t("extra",null,{slot:"extra"}),e._t("footer",null,{slot:"footer"})],2)],1)])]):e._e(),e.$route.meta.hiddenHeaderContent||e.affix?e._e():n("div",{staticClass:"page-header"},[n("div",{staticClass:"page-header-index-wide"},[n("a-page-header",{attrs:{title:e.title,"sub-title":e.subTitle,breadcrumb:{props:{routes:e.breadList}}}},[e._t("extra",null,{slot:"extra"}),e._t("footer",null,{slot:"footer"})],2)],1)]),n("div",{staticClass:"content"},[n("div",{staticClass:"page-header-index-wide"},[e._t("default",[n("router-view",{ref:"content"})])],2)])],1)},Mt=[],At={name:"PageView",props:{title:{type:String,default:null},subTitle:{type:String,default:null},affix:{type:Boolean,default:!1}},data:function(){return{breadList:[]}},created:function(){this.getBreadcrumb()},watch:{$route:function(){this.getBreadcrumb()}},methods:{getBreadcrumb:function(){var e=this;this.breadList=[],this.$route.matched.forEach((function(t){t.breadcrumbName=t.meta.title,e.breadList.push(t)}))}}},Dt=At,It=(n("3fc9"),Object(l["a"])(Dt,Pt,Mt,!1,null,"773d7ef3",null)),Ht=It.exports},"7e58":function(e,t,n){"use strict";var a=n("1529"),o=n.n(a);o.a},"862d":function(e,t,n){},9158:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n("5a0c"),o=n.n(a);n("a471");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return o()(e).format(t)}function i(e){var t=(new Date).getTime(),n=t-e,a=Math.floor(n/864e5);if(0===a){var r=n%864e5,i=Math.floor(r/36e5);if(0===i){var s=r%36e5,c=Math.floor(s/6e4);if(0===c){var l=s%6e4,u=Math.round(l/1e3);return u+" 秒前"}return c+" 分钟前"}return i+" 小时前"}return a<0?"刚刚":a<5?a+" 天前":o()(e).format("YYYY-MM-DD HH:mm")}o.a.locale("zh-cn")},9224:function(e){e.exports=JSON.parse('{"a":"1.4.8"}')},"9efd":function(e,t,n){"use strict";n("96cf"),n("ac6a"),n("456d");var a=n("1da1"),o=n("bc3a"),r=n.n(o),i=n("a026"),s=n("f64c"),c=n("56cd"),l=n("4360"),u=n("ca00"),d=r.a.create({timeout:1e4,withCredentials:!0});function f(e){var t=l["a"].getters.token;i["default"].$log.debug("Got token from store",t),t&&t.access_token&&(e.headers["Admin-Authorization"]=t.access_token)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.response.config,f(n),e.next=4,r.a.request(n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var p=null;function g(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=l["a"].getters.token.refresh_token,e.prev=1,null===p&&(p=l["a"].dispatch("refreshToken",n)),e.next=5,p;case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),e.t0.response&&e.t0.response.data&&e.t0.response.data.data===n&&(s["a"].warning("当前登录状态已失效，请重新登录"),l["a"].dispatch("ToggleLoginModal",!0)),i["default"].$log.error("Failed to refresh token",e.t0);case 11:return e.prev=11,p=null,e.finish(11);case 14:return e.abrupt("return",m(t));case 15:case"end":return e.stop()}}),e,null,[[1,7,11,14]])}))),b.apply(this,arguments)}function v(e){if(!Object(u["b"])(e)||!Object(u["b"])(e.data))return null;var t=e.data;return Object.keys(t).map((function(e){return t[e]}))}d.interceptors.request.use((function(e){return e.baseURL=l["a"].getters.apiUrl,f(e),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),(function(e){if(r.a.isCancel(e))return i["default"].$log.debug("Cancelled uploading by user."),Promise.reject(e);i["default"].$log.error("Response failed",e);var t=e.response,n=t?t.status:-1;i["default"].$log.error("Server response status",n);var a=t?t.data:null;if(a){var o=!1;if(i["default"].$log.error("Business response status",a.status),400===a.status){var u=v(a);u&&(o=!0,c["a"].error({message:a.message,description:function(e){var t=u.map((function(t){return e("a-alert",{props:{message:t,banner:!0,showIcon:!1,type:"error"}})}));return e("div",t)},duration:10}))}else if(401===a.status)if(l["a"].getters.token&&l["a"].getters.token.access_token===a.data){var d=g(e);if(d!==e)return d}else s["a"].warning("当前登录状态已失效，请重新登录"),l["a"].dispatch("ToggleLoginModal",!0);else 403===a.status||404===a.status||a.status;o||s["a"].error(a.message)}else s["a"].error("网络异常");return Promise.reject(e)})),t["a"]=d},"9fb0":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"i",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return p}));var a="Access-Token",o="SIDEBAR_TYPE",r="DEFAULT_THEME",i="DEFAULT_LAYOUT_MODE",s="DEFAULT_COLOR",c="DEFAULT_FIXED_HEADER",l="DEFAULT_FIXED_SIDEMENU",u="DEFAULT_FIXED_HEADER_HIDDEN",d="DEFAULT_CONTENT_WIDTH_TYPE",f="USER",m="API_URL",h="OPTIONS",p="LAYOUT_SETTING"},a796:function(e,t,n){"use strict";var a=n("bc3a"),o=n.n(a),r=n("9efd"),i="/api/admin/attachments",s={query:function(e){return Object(r["a"])({url:i,params:e,method:"get"})},get:function(e){return Object(r["a"])({url:"".concat(i,"/").concat(e),method:"get"})},delete:function(e){return Object(r["a"])({url:"".concat(i,"/").concat(e),method:"delete"})},deleteInBatch:function(e){return Object(r["a"])({url:"".concat(i),method:"delete",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})},update:function(e,t){return Object(r["a"])({url:"".concat(i,"/").concat(e),method:"put",data:t})},getMediaTypes:function(){return Object(r["a"])({url:"".concat(i,"/media_types"),method:"get"})},getTypes:function(){return Object(r["a"])({url:"".concat(i,"/types"),method:"get"})}};s.CancelToken=o.a.CancelToken,s.isCancel=o.a.isCancel,s.upload=function(e,t,n){return Object(r["a"])({url:"".concat(i,"/upload"),timeout:864e4,data:e,onUploadProgress:t,cancelToken:n,method:"post"})},s.uploads=function(e,t,n){return Object(r["a"])({url:"".concat(i,"/uploads"),timeout:864e4,data:e,onUploadProgress:t,cancelToken:n,method:"post"})},s.type={LOCAL:{type:"LOCAL",text:"本地"},SMMS:{type:"SMMS",text:"SM.MS"},UPOSS:{type:"UPOSS",text:"又拍云"},QINIUOSS:{type:"QINIUOSS",text:"七牛云"},ALIOSS:{type:"ALIOSS",text:"阿里云"},BAIDUBOS:{type:"BAIDUBOS",text:"百度云"},TENCENTCOS:{type:"TENCENTCOS",text:"腾讯云"},HUAWEIOBS:{type:"HUAWEIOBS",text:"华为云"},MINIO:{type:"MINIO",text:"MinIO"}},t["a"]=s},b6e6:function(e,t,n){"use strict";var a=n("009f"),o=n.n(a);o.a},c24f:function(e,t,n){"use strict";var a=n("9efd"),o="/api/admin/users",r={getProfile:function(){return Object(a["a"])({url:"".concat(o,"/profiles"),method:"get"})},updateProfile:function(e){return Object(a["a"])({url:"".concat(o,"/profiles"),method:"put",data:e})},updatePassword:function(e,t){return Object(a["a"])({url:"".concat(o,"/profiles/password"),method:"put",data:{oldPassword:e,newPassword:t}})},mfaGenerate:function(e){return Object(a["a"])({url:"".concat(o,"/mfa/generate"),method:"put",data:{mfaType:e}})},mfaUpdate:function(e,t,n){return Object(a["a"])({url:"".concat(o,"/mfa/update"),method:"put",data:{mfaType:e,mfaKey:t,authcode:n}})},mfaCheck:function(e){return Object(a["a"])({url:"".concat(o,"/mfa/check"),method:"put",data:{authcode:e}})}};t["a"]=r},ca00:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n("456d"),n("ac6a");var a=n("53ca");function o(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!0),e.eventType="message",window.dispatchEvent(e)}function r(e){return e&&"object"===Object(a["a"])(e)&&e.constructor===Object}function i(e){if(!e&&"object"!==Object(a["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Object(a["a"])(e[n])?t[n]=i(e[n]):t[n]=e[n]})),t}},d73b:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n("680a"),o=[{path:"/",name:"index",component:a["a"],meta:{title:"首页"},redirect:"/dashboard",children:[{path:"/dashboard",name:"Dashboard",component:function(){return n.e("chunk-1c5c5806").then(n.bind(null,"5c3a8"))},meta:{title:"仪表盘",icon:"dashboard",hiddenHeaderContent:!1,keepAlive:!1}},{path:"/posts",name:"Posts",component:a["b"],redirect:"/posts/list",meta:{title:"文章",icon:"form"},children:[{path:"/posts/list",name:"PostList",component:function(){return Promise.all([n.e("chunk-134ef324"),n.e("chunk-2a480ed0")]).then(n.bind(null,"dae2"))},meta:{title:"所有文章",hiddenHeaderContent:!1}},{path:"/posts/write",name:"PostWrite",component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-f7840a7e"),n.e("chunk-134ef324"),n.e("chunk-2d228c74")]).then(n.bind(null,"db44"))},meta:{title:"写文章",hiddenHeaderContent:!1,keepAlive:!1}},{path:"/posts/edit",name:"PostEdit",hidden:!0,component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-f7840a7e"),n.e("chunk-134ef324"),n.e("chunk-2d228c74")]).then(n.bind(null,"db44"))},meta:{title:"编辑文章",hiddenHeaderContent:!1,keepAlive:!1}},{path:"/categories",name:"CategoryList",component:function(){return n.e("chunk-6390f65b").then(n.bind(null,"7e89"))},meta:{title:"分类目录",hiddenHeaderContent:!1}},{path:"/tags",name:"TagList",component:function(){return n.e("chunk-15388063").then(n.bind(null,"aa1e"))},meta:{title:"标签",hiddenHeaderContent:!1}}]},{path:"/sheets",name:"Sheets",component:a["b"],redirect:"/sheets/list",meta:{title:"页面",icon:"read"},children:[{path:"/sheets/list",name:"SheetList",component:function(){return n.e("chunk-148f7b9b").then(n.bind(null,"a8ed"))},meta:{title:"所有页面",hiddenHeaderContent:!1}},{path:"/sheets/write",name:"SheetWrite",component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-f7840a7e"),n.e("chunk-5a594e67")]).then(n.bind(null,"f585"))},meta:{title:"新建页面",hiddenHeaderContent:!1,keepAlive:!1}},{path:"/sheets/edit",name:"SheetEdit",hidden:!0,component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-f7840a7e"),n.e("chunk-5a594e67")]).then(n.bind(null,"f585"))},meta:{title:"编辑页面",hiddenHeaderContent:!1,keepAlive:!1}},{path:"/sheets/links",name:"LinkList",hidden:!0,component:function(){return n.e("chunk-2d0ba57a").then(n.bind(null,"3799"))},meta:{title:"友情链接",hiddenHeaderContent:!1}},{path:"/sheets/photos",name:"PhotoList",hidden:!0,component:function(){return n.e("chunk-cfe23950").then(n.bind(null,"7fb0"))},meta:{title:"图库",hiddenHeaderContent:!1}},{path:"/sheets/journals",name:"JournalList",hidden:!0,component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-949ad078")]).then(n.bind(null,"eaa5"))},meta:{title:"日志",hiddenHeaderContent:!1}}]},{path:"/attachments",name:"Attachments",component:function(){return Promise.all([n.e("chunk-026864dc"),n.e("chunk-2d0cf13d")]).then(n.bind(null,"61d0"))},meta:{title:"附件",icon:"picture",hiddenHeaderContent:!1}},{path:"/comments",name:"Comments",component:function(){return n.e("chunk-2d0b64bf").then(n.bind(null,"1d0f"))},meta:{title:"评论",icon:"message",hiddenHeaderContent:!1}},{path:"/interface",name:"Interface",component:a["b"],redirect:"/interface/themes",meta:{title:"外观",icon:"skin"},children:[{path:"/interface/themes",name:"ThemeList",component:function(){return n.e("chunk-259205b6").then(n.bind(null,"79e7"))},meta:{title:"主题",hiddenHeaderContent:!1}},{path:"/interface/menus",name:"MenuList",component:function(){return n.e("chunk-8f832ed8").then(n.bind(null,"71d6"))},meta:{title:"菜单",hiddenHeaderContent:!1}},{path:"/interface/themes/edit",name:"ThemeEdit",component:function(){return Promise.all([n.e("chunk-c3df4a22"),n.e("chunk-b67049c6")]).then(n.bind(null,"33c9"))},meta:{title:"主题编辑",hiddenHeaderContent:!1}}]},{path:"/user",name:"User",component:a["c"],redirect:"/user/profile",meta:{title:"用户",icon:"user"},children:[{path:"/user/profile",name:"Profile",component:function(){return n.e("chunk-2987faf8").then(n.bind(null,"7c54"))},meta:{title:"个人资料",hiddenHeaderContent:!1}}]},{path:"/system",name:"System",component:a["b"],redirect:"/system/options",meta:{title:"系统",icon:"setting"},children:[{path:"/system/developer/options",name:"DeveloperOptions",hidden:!0,component:function(){return Promise.all([n.e("chunk-c3df4a22"),n.e("chunk-02db1438")]).then(n.bind(null,"8381"))},meta:{title:"开发者选项",hiddenHeaderContent:!1}},{path:"/system/options",name:"SystemOptions",component:function(){return n.e("chunk-5274dfd7").then(n.bind(null,"d369"))},meta:{title:"博客设置",hiddenHeaderContent:!1}},{path:"/system/tools",name:"ToolList",component:function(){return n.e("chunk-2d228d13").then(n.bind(null,"db98"))},meta:{title:"小工具",hiddenHeaderContent:!1}},{path:"/system/about",name:"About",component:function(){return n.e("chunk-2d0b383e").then(n.bind(null,"2967"))},meta:{title:"关于",hiddenHeaderContent:!1}}]}]},{path:"*",redirect:"/404",hidden:!0}],r=[{path:"/login",name:"Login",meta:{title:"登录"},component:function(){return n.e("chunk-2d213307").then(n.bind(null,"ac2a"))}},{path:"/install",name:"Install",meta:{title:"安装向导"},component:function(){return n.e("chunk-52454c14").then(n.bind(null,"306f"))}},{path:"/password/reset",name:"ResetPassword",meta:{title:"重置密码"},component:function(){return n.e("chunk-2d2165e6").then(n.bind(null,"c1bd"))}},{path:"/404",name:"NotFound",component:function(){return n.e("chunk-2d221c57").then(n.bind(null,"cc89"))}}]},de07:function(e,t,n){},e819:function(e,t,n){"use strict";t["a"]={primaryColor:"#1890FF",navTheme:"dark",layout:"topmenu",contentWidth:"Fixed",fixedHeader:!1,fixSiderbar:!1,autoHideHeader:!1,storageOptions:{namespace:"halo__",name:"ls",storage:"local"}}},fb91:function(e,t,n){},fe86:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model",{ref:"loginForm",attrs:{model:e.form.model,rules:e.form.rules,layout:"vertical"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}}},[e.form.needAuthCode?e._e():n("a-form-model-item",{staticClass:"animated fadeInUp",style:{"animation-delay":"0.1s"},attrs:{prop:"username"}},[n("a-input",{attrs:{placeholder:"用户名/邮箱"},model:{value:e.form.model.username,callback:function(t){e.$set(e.form.model,"username",t)},expression:"form.model.username"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e.form.needAuthCode?e._e():n("a-form-model-item",{staticClass:"animated fadeInUp",style:{"animation-delay":"0.2s"},attrs:{prop:"password"}},[n("a-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.model.password,callback:function(t){e.$set(e.form.model,"password",t)},expression:"form.model.password"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e.form.needAuthCode?n("a-form-model-item",{staticClass:"animated fadeInUp",style:{"animation-delay":"0.1s"},attrs:{prop:"authcode"}},[n("a-input",{attrs:{placeholder:"两步验证码",maxLength:6},model:{value:e.form.model.authcode,callback:function(t){e.$set(e.form.model,"authcode",t)},expression:"form.model.authcode"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"safety-certificate"},slot:"prefix"})],1)],1):e._e(),n("a-form-model-item",{staticClass:"animated fadeInUp",style:{"animation-delay":"0.3s"}},[n("a-button",{attrs:{loading:e.form.logging,type:"primary",block:!0},on:{click:function(t){e.form.needAuthCode?e.handleLogin():e.handleLoginClick()}}},[e._v(e._s(e.buttonName))])],1)],1)],1)},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),i=n("50fc"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"LoginForm",data:function(){var e=this,t=function(t,n,a){!n&&e.form.needAuthCode?a(new Error("* 请输入两步验证码")):a()};return{form:{model:{authcode:null,password:null,username:null},rules:{username:[{required:!0,message:"* 用户名/邮箱不能为空",trigger:["change"]}],password:[{required:!0,message:"* 密码不能为空",trigger:["change"]}],authcode:[{validator:t,trigger:["change"]}]},needAuthCode:!1,logging:!1}}},computed:{buttonName:function(){return this.form.needAuthCode?"验证":"登录"}},methods:l(l({},Object(s["b"])(["login","refreshUserCache","refreshOptionsCache"])),{},{handleLoginClick:function(){var e=this;e.$refs.loginForm.validate((function(t){t&&(e.form.logging=!0,i["a"].loginPreCheck(e.form.model.username,e.form.model.password).then((function(t){var n=t.data.data;n&&n.needMFACode?(e.form.needAuthCode=!0,e.form.model.authcode=null):e.handleLogin()})).finally((function(){setTimeout((function(){e.form.logging=!1}),300)})))}))},handleLogin:function(){var e=this;e.form.logging=!0,e.$refs.loginForm.validate((function(t){t&&e.login(e.form.model).then((function(){e.$emit("success")})).finally((function(){setTimeout((function(){e.form.logging=!1}),300)}))}))}})},d=u,f=n("2877"),m=Object(f["a"])(d,a,o,!1,null,null,null);t["a"]=m.exports}});